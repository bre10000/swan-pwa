import{S as t,i as e,s as a,e as s,t as r,c as o,a as c,b as i,d as l,f as n,h as u,j as d,k as m,I as h,l as p,m as f,n as b,p as g,q as $,r as _,v,w as k,x as w,y as E,z as y,A as D,B as x,C as S,D as P,E as A,F as V,G as B,H as R,J as I,u as N,g as T,o as C,K as F,L as j,M,N as U}from"./client.304cf8bb.js";import{l as H}from"./index.79acf2d4.js";import{D as O}from"./DeleteConfirmation.82f74e06.js";import{D as q}from"./DataTableDetails.18c6711c.js";import{e as G}from"./csvGenerator.56fc5e7e.js";import{e as L}from"./exportPDFAlternate.b140167e.js";import{c as W}from"./log.cca70985.js";import"./SelectedColumns.0ab9968c.js";import"./SelectedColumns.61150ba7.js";import"./jspdf.plugin.autotable.dc15019a.js";function Y(t){let e,a,h=t[3].total+"";return{c(){e=s("span"),a=r(h),this.h()},l(t){e=o(t,"SPAN",{class:!0});var s=c(e);a=i(s,h),s.forEach(l),this.h()},h(){n(e,"class","gray has-text-weight-light ml-2")},m(t,s){u(t,e,s),d(e,a)},p(t,e){8&e&&h!==(h=t[3].total+"")&&m(a,h)},d(t){t&&l(e)}}}function z(t){let e,a,m,p,b,D,x,P,A,V,B,R,I,N,T,C;return x=new h({props:{data:f,scale:"3"}}),{c(){e=s("div"),a=s("br"),m=s("br"),p=s("br"),b=s("br"),D=y(),g(x.$$.fragment),P=y(),A=s("p"),V=r("Uh oh! nothing found on database."),B=y(),R=s("br"),I=s("br"),N=s("br"),T=s("br"),this.h()},l(t){e=o(t,"DIV",{class:!0});var s=c(e);a=o(s,"BR",{}),m=o(s,"BR",{}),p=o(s,"BR",{}),b=o(s,"BR",{}),D=S(s),$(x.$$.fragment,s),P=S(s),A=o(s,"P",{class:!0});var r=c(A);V=i(r,"Uh oh! nothing found on database."),r.forEach(l),B=S(s),R=o(s,"BR",{}),I=o(s,"BR",{}),N=o(s,"BR",{}),T=o(s,"BR",{}),s.forEach(l),this.h()},h(){n(A,"class","gray"),n(e,"class","has-text-centered")},m(t,s){u(t,e,s),d(e,a),d(e,m),d(e,p),d(e,b),d(e,D),_(x,e,null),d(e,P),d(e,A),d(A,V),d(e,B),d(e,R),d(e,I),d(e,N),d(e,T),C=!0},p:v,i(t){C||(k(x.$$.fragment,t),C=!0)},o(t){w(x.$$.fragment,t),C=!1},d(t){t&&l(e),E(x)}}}function J(t){let e,a;return e=new q({props:{pagination:t[3],columns:t[4],columnsDetails:t[5],detailVariable:X,rows:t[2],options:t[6]}}),e.$on("clickCol",t[9]),e.$on("changePage",t[8]),e.$on("deleteRow",t[12]),e.$on("editRow",t[10]),e.$on("clickRow",t[10]),e.$on("printRow",t[11]),{c(){g(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,s){_(e,t,s),a=!0},p(t,a){const s={};8&a&&(s.pagination=t[3]),4&a&&(s.rows=t[2]),e.$set(s)},i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){w(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function K(t){let e,a;return e=new O({}),e.$on("confirm",t[13]),e.$on("dismiss",t[19]),{c(){g(e.$$.fragment)},l(t){$(e.$$.fragment,t)},m(t,s){_(e,t,s),a=!0},p:v,i(t){a||(k(e.$$.fragment,t),a=!0)},o(t){w(e.$$.fragment,t),a=!1},d(t){E(e,t)}}}function Q(t){let e,a,m,v,N,T,C,F,M,U,H,O,q,G,L,W,Q,X,Z,tt,et,at,st,rt,ot,ct,it,lt,nt,ut,dt,mt,ht,pt,ft,bt,gt,$t,_t,vt,kt,wt,Et,yt,Dt,xt,St,Pt,At,Vt,Bt,Rt,It,Nt,Tt,Ct,Ft,jt,Mt,Ut,Ht,Ot,qt,Gt,Lt,Wt,Yt,zt,Jt,Kt,Qt,Xt=t[3]&&Y(t);G=new h({props:{data:p}}),ct=new h({props:{data:f}}),vt=new h({props:{data:b}});const Zt=[J,z],te=[];function ee(t,e){return t[2]?.length>0?0:1}Mt=ee(t),Ut=te[Mt]=Zt[Mt](t);let ae=t[1]&&K(t);return{c(){e=y(),a=s("br"),m=s("br"),v=y(),N=s("div"),T=s("div"),C=s("div"),F=s("h3"),M=r("Stocks\r\n                "),Xt&&Xt.c(),U=y(),H=s("div"),O=s("a"),q=s("span"),g(G.$$.fragment),L=y(),W=s("span"),Q=r("Add a Stock"),X=y(),Z=s("div"),tt=s("div"),et=s("div"),at=s("div"),st=s("input"),rt=y(),ot=s("span"),g(ct.$$.fragment),it=y(),lt=s("div"),nt=s("button"),ut=r("Search"),dt=y(),mt=s("div"),ht=s("div"),pt=s("div"),ft=s("button"),bt=s("span"),gt=r("Export To Excel or PDF"),$t=y(),_t=s("span"),g(vt.$$.fragment),kt=y(),wt=s("div"),Et=s("div"),yt=s("a"),Dt=r("Export Current Page to Excel"),xt=y(),St=s("a"),Pt=r("Export Current Page to PDF"),At=y(),Vt=s("hr"),Bt=y(),Rt=s("a"),It=r("Export All to Excel"),Nt=y(),Tt=s("a"),Ct=r("Export All to PDF"),Ft=y(),jt=s("div"),Ut.c(),Ht=y(),Ot=s("br"),qt=s("br"),Gt=s("br"),Lt=s("br"),Wt=s("br"),Yt=y(),ae&&ae.c(),zt=D(),this.h()},l(t){x('[data-svelte="svelte-13tnnf4"]',document.head).forEach(l),e=S(t),a=o(t,"BR",{}),m=o(t,"BR",{}),v=S(t),N=o(t,"DIV",{class:!0});var s=c(N);T=o(s,"DIV",{class:!0});var r=c(T);C=o(r,"DIV",{class:!0});var n=c(C);F=o(n,"H3",{});var u=c(F);M=i(u,"Stocks\r\n                "),Xt&&Xt.l(u),u.forEach(l),n.forEach(l),U=S(r),H=o(r,"DIV",{class:!0});var d=c(H);O=o(d,"A",{href:!0,class:!0});var h=c(O);q=o(h,"SPAN",{class:!0});var p=c(q);$(G.$$.fragment,p),p.forEach(l),L=S(h),W=o(h,"SPAN",{class:!0});var f=c(W);Q=i(f,"Add a Stock"),f.forEach(l),h.forEach(l),d.forEach(l),r.forEach(l),X=S(s),Z=o(s,"DIV",{class:!0});var b=c(Z);tt=o(b,"DIV",{class:!0});var g=c(tt);et=o(g,"DIV",{class:!0,style:!0});var _=c(et);at=o(_,"DIV",{class:!0});var k=c(at);st=o(k,"INPUT",{class:!0,type:!0,placeholder:!0}),rt=S(k),ot=o(k,"SPAN",{class:!0});var w=c(ot);$(ct.$$.fragment,w),w.forEach(l),k.forEach(l),it=S(_),lt=o(_,"DIV",{class:!0});var E=c(lt);nt=o(E,"BUTTON",{class:!0});var y=c(nt);ut=i(y,"Search"),y.forEach(l),E.forEach(l),_.forEach(l),g.forEach(l),dt=S(b),mt=o(b,"DIV",{class:!0});var P=c(mt);ht=o(P,"DIV",{class:!0});var A=c(ht);pt=o(A,"DIV",{class:!0});var V=c(pt);ft=o(V,"BUTTON",{class:!0,"aria-haspopup":!0,"aria-controls":!0});var B=c(ft);bt=o(B,"SPAN",{});var R=c(bt);gt=i(R,"Export To Excel or PDF"),R.forEach(l),$t=S(B),_t=o(B,"SPAN",{class:!0});var I=c(_t);$(vt.$$.fragment,I),I.forEach(l),B.forEach(l),V.forEach(l),kt=S(A),wt=o(A,"DIV",{class:!0,id:!0,role:!0});var j=c(wt);Et=o(j,"DIV",{class:!0});var Y=c(Et);yt=o(Y,"A",{href:!0,class:!0});var z=c(yt);Dt=i(z,"Export Current Page to Excel"),z.forEach(l),xt=S(Y),St=o(Y,"A",{href:!0,class:!0});var J=c(St);Pt=i(J,"Export Current Page to PDF"),J.forEach(l),At=S(Y),Vt=o(Y,"HR",{class:!0}),Bt=S(Y),Rt=o(Y,"A",{href:!0,class:!0});var K=c(Rt);It=i(K,"Export All to Excel"),K.forEach(l),Nt=S(Y),Tt=o(Y,"A",{href:!0,class:!0});var Mt=c(Tt);Ct=i(Mt,"Export All to PDF"),Mt.forEach(l),Y.forEach(l),j.forEach(l),A.forEach(l),P.forEach(l),b.forEach(l),Ft=S(s),jt=o(s,"DIV",{class:!0});var Jt=c(jt);Ut.l(Jt),Jt.forEach(l),Ht=S(s),Ot=o(s,"BR",{}),qt=o(s,"BR",{}),Gt=o(s,"BR",{}),Lt=o(s,"BR",{}),Wt=o(s,"BR",{}),s.forEach(l),Yt=S(t),ae&&ae.l(t),zt=D(),this.h()},h(){document.title="Stocks",n(C,"class","column"),n(q,"class","icon"),n(W,"class","has-text-white has-text-weight-bold"),n(O,"href","/stocks/add"),n(O,"class","button is-dark px-5"),n(H,"class","column has-text-right"),n(T,"class","columns"),n(st,"class","input is-dark"),n(st,"type","search"),n(st,"placeholder","search"),n(ot,"class","icon is-small is-left"),n(at,"class","control has-icons-left"),n(nt,"class","button is-dark has-text-weight-bold"),n(lt,"class","control"),n(et,"class","field has-addons"),P(et,"width","500px"),n(tt,"class","column"),n(_t,"class","icon is-small"),n(ft,"class","button"),n(ft,"aria-haspopup","true"),n(ft,"aria-controls","dropdown-menu"),n(pt,"class","dropdown-trigger"),n(yt,"href","#"),n(yt,"class","dropdown-item"),n(St,"href","#"),n(St,"class","dropdown-item"),n(Vt,"class","dropdown-divider"),n(Rt,"href","#"),n(Rt,"class","dropdown-item"),n(Tt,"href","#"),n(Tt,"class","dropdown-item"),n(Et,"class","dropdown-content has-text-left"),n(wt,"class","dropdown-menu"),n(wt,"id","dropdown-menu"),n(wt,"role","menu"),n(ht,"class","dropdown is-hoverable"),n(mt,"class","column has-text-right"),n(Z,"class","columns"),n(jt,"class","card"),n(N,"class","container px-6")},m(s,r){u(s,e,r),u(s,a,r),u(s,m,r),u(s,v,r),u(s,N,r),d(N,T),d(T,C),d(C,F),d(F,M),Xt&&Xt.m(F,null),d(T,U),d(T,H),d(H,O),d(O,q),_(G,q,null),d(O,L),d(O,W),d(W,Q),d(N,X),d(N,Z),d(Z,tt),d(tt,et),d(et,at),d(at,st),A(st,t[0]),d(at,rt),d(at,ot),_(ct,ot,null),d(et,it),d(et,lt),d(lt,nt),d(nt,ut),d(Z,dt),d(Z,mt),d(mt,ht),d(ht,pt),d(pt,ft),d(ft,bt),d(bt,gt),d(ft,$t),d(ft,_t),_(vt,_t,null),d(ht,kt),d(ht,wt),d(wt,Et),d(Et,yt),d(yt,Dt),d(Et,xt),d(Et,St),d(St,Pt),d(Et,At),d(Et,Vt),d(Et,Bt),d(Et,Rt),d(Rt,It),d(Et,Nt),d(Et,Tt),d(Tt,Ct),d(N,Ft),d(N,jt),te[Mt].m(jt,null),d(N,Ht),d(N,Ot),d(N,qt),d(N,Gt),d(N,Lt),d(N,Wt),u(s,Yt,r),ae&&ae.m(s,r),u(s,zt,r),Jt=!0,Kt||(Qt=[V(st,"input",t[18]),V(nt,"click",t[7]),V(yt,"click",B(t[14])),V(St,"click",B(t[15])),V(Rt,"click",B(t[16])),V(Tt,"click",B(t[17]))],Kt=!0)},p(t,[e]){t[3]?Xt?Xt.p(t,e):(Xt=Y(t),Xt.c(),Xt.m(F,null)):Xt&&(Xt.d(1),Xt=null),1&e&&A(st,t[0]);let a=Mt;Mt=ee(t),Mt===a?te[Mt].p(t,e):(j(),w(te[a],1,1,(()=>{te[a]=null})),R(),Ut=te[Mt],Ut?Ut.p(t,e):(Ut=te[Mt]=Zt[Mt](t),Ut.c()),k(Ut,1),Ut.m(jt,null)),t[1]?ae?(ae.p(t,e),2&e&&k(ae,1)):(ae=K(t),ae.c(),k(ae,1),ae.m(zt.parentNode,zt)):ae&&(j(),w(ae,1,1,(()=>{ae=null})),R())},i(t){Jt||(k(G.$$.fragment,t),k(ct.$$.fragment,t),k(vt.$$.fragment,t),k(Ut),k(ae),Jt=!0)},o(t){w(G.$$.fragment,t),w(ct.$$.fragment,t),w(vt.$$.fragment,t),w(Ut),w(ae),Jt=!1},d(t){t&&l(e),t&&l(a),t&&l(m),t&&l(v),t&&l(N),Xt&&Xt.d(),E(G),E(ct),E(vt),te[Mt].d(),t&&l(Yt),ae&&ae.d(t),t&&l(zt),Kt=!1,I(Qt)}}}let X="stock_items";function Z(t){let e=[];return t.forEach((t=>{e.push([t.id,t.attributes.warehouse.data.attributes.name,t.attributes.consortium_member.data.attributes.name,t.attributes.date,"-","-","-","-","-","-","-","-"]),t.attributes.stock_items.data.forEach((t=>{e.push(["-","-","-","-",t.id,t.attributes.purchase_order_item.data.attributes.purchase_order.data.attributes.poNumber,t.attributes.purchase_order_item.data.attributes.item.data.attributes.name,t.attributes.purchase_order_item.data.attributes.unit,t.attributes.purchase_order_item.data.attributes.pieces,t.attributes.purchase_order_item.data.attributes.quantity,t.attributes.purchase_order_item.data.attributes.currency,t.attributes.purchase_order_item.data.attributes.unitPrice,t.attributes.received])}))})),e}function tt(t,e,a){const s=N.subscribe((t=>{!t.loggedIn&&t.fetched?T("/login"):t.data&&m()}));C(s);let r,o="",c="",i=!1,l=[];const n=[{key:"id",title:"ID",sortable:!0,filterValue:t=>Math.floor(t.id/10),interval:10,filterType:"numeric",headerClass:"has-text-left",selected:!0},{key:"warehouse",title:"Warehouse",sortable:!0,filterValue:t=>t.first_name.charAt(0).toLowerCase(),filterType:"string",selected:!0},{key:"consortium_member",title:"Consortium Member",sortable:!0,filterValue:t=>t.last_name.charAt(0).toLowerCase(),filterType:"string",selected:!0},{key:"date",title:"Date",sortable:!0,filterValue:t=>t.last_name.charAt(0).toLowerCase(),filterType:"string",selected:!0}],u=[{key:"id",title:"ID",sortable:!0,selected:!0},{key:"poNumber",title:"PO#",sortable:!0,selected:!0},{key:"item",title:"ITEM",sortable:!0,selected:!0},{key:"unit",title:"Unit",sortable:!0,selected:!0},{key:"pieces",title:"Pieces",sortable:!0,selected:!0},{key:"quantity",title:"Quantity",sortable:!0,selected:!0},{key:"currency",title:"Currency",sortable:!0,selected:!0},{key:"unitPrice",title:"Unit Price",sortable:!0,selected:!0},{key:"received",title:"Received",sortable:!0,selected:!0}];let d;async function m(t,e,s){try{let r={filters:t||{},sort:e||"id:desc","pagination[page]":s||1,populate:{consortium_member:{populate:"*"},warehouse:{populate:"*"},stock_items:{populate:["purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]}}};r=H.stringify(r,{encodeValuesOnly:!0});let o=await F("stocks",r);console.log("Get Stocks Request - ",o),a(2,l=o.data),a(3,d=o.meta?.pagination)}catch(t){console.warn("Error Getting Stocks - ",t)}}function h(){m(p(),c)}function p(){return{$or:[{date:{$containsi:o}},{consortium_member:{name:{$containsi:o}}},{warehouse:{name:{$containsi:o}}},{stock_items:{purchase_order_item:{item:{name:{$containsi:o}}}}},{stock_items:{purchase_order_item:{item:{category:{$containsi:o}}}}},{stock_items:{purchase_order_item:{unit:{$containsi:o}}}},{stock_items:{purchase_order_item:{purchase_order:{poNumber:{$containsi:o}}}}}]}}return[o,i,l,d,n,u,{title:"Stocks Table",showFilterHeader:!1,showSelect:!1,showDetails:!1,showPrint:!0,showActions:!0,showFooter:!1},h,function(t){m(p(),c,t.detail.newPage)},function(t){c=t.detail.key,c=c.replace("consortium_member","consortium_member.name"),c=c.replace("warehouse","warehouse.name"),m(p(),c,t.detail.newPage)},function(t){T("stocks/edit/"+t.detail.row.id)},function(t){T("reports/single/stock/"+t.detail.row.id)},function(t){r=t.detail.row,a(1,i=!0)},async function(){a(1,i=!1);try{let t=await M("stocks/"+r.id,null);console.log("Delete Stock Request  ",t),t.data?.id&&(U.push("Stock Deleted Successfully!",{duration:2e4,theme:{"--toastBackground":"#48BB78","--toastBarBackground":"#2F855A"}}),W("Stock",r,"Delete",t.data.id),h())}catch(t){console.log("Error Delete Stock   ",t)}},function(){let t=new Date,e=`"SWAN "Stocks ${t.getFullYear()}-${t.getMonth()}-${t.getDate()} T${t.getHours()}-${t.getMinutes()}-${t.getSeconds()}.csv`,a=Z(l);a=[n.concat(u).map((t=>t.title)),...a],G(e,a)},function(){L("Stocks",Z(l),n.concat(u))},async function(){try{let t={populate:{consortium_member:{populate:"*"},warehouse:{populate:"*"},stock_items:{populate:["purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]}},"pagination[limit]":-1};t=H.stringify(t,{encodeValuesOnly:!0});let e=await F("stocks",t),a=new Date,s=`"SWAN "Stocks ${a.getFullYear()}-${a.getMonth()}-${a.getDate()} T${a.getHours()}-${a.getMinutes()}-${a.getSeconds()}.csv`,r=Z(e.data);r=[n.concat(u).map((t=>t.title)),...r],G(s,r)}catch(t){}},async function(){try{let t={"pagination[limit]":-1,populate:{consortium_member:{populate:"*"},warehouse:{populate:"*"},stock_items:{populate:["purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]}}};t=H.stringify(t,{encodeValuesOnly:!0});let e=await F("stocks",t);L("Stocks",Z(e.data),n.concat(u))}catch(t){}},function(){o=this.value,a(0,o)},()=>a(1,i=!1)]}class et extends t{constructor(t){super(),e(this,t,tt,Q,a,{})}}export{et as default};
