import{S as a,i as t,s as e,I as r,T as s,A as c,h as i,e as l,t as o,z as u,c as d,a as n,b as h,d as m,C as b,f as v,j as f,k as p,P as _,Z as g,aa as E,p as I,B as y,q as k,a4 as D,r as P,E as V,F as $,G as B,a3 as R,an as S,w,x,y as A,J as q,W as N,_ as O,N as U,g as j,K as C}from"./client.e36e64da.js";import{f as L,r as H,a as T}from"./required.c5e0ef47.js";import{n as G}from"./index.8bbc6ba3.js";import{S as Q}from"./Select.43469201.js";import"./DateInput.a88975cd.js";import{l as F}from"./index.79acf2d4.js";import{c as W}from"./log.98c6314c.js";function z(a,t,e){const r=a.slice();return r[27]=t[e],r}function J(a,t,e){const r=a.slice();return r[30]=t[e],r}function K(a){let t,e=a[6],r=[];for(let t=0;t<e.length;t+=1)r[t]=M(J(a,e,t));return{c(){for(let a=0;a<r.length;a+=1)r[a].c();t=c()},l(a){for(let t=0;t<r.length;t+=1)r[t].l(a);t=c()},m(a,e){for(let t=0;t<r.length;t+=1)r[t].m(a,e);i(a,t,e)},p(a,s){if(64&s[0]){let c;for(e=a[6],c=0;c<e.length;c+=1){const i=J(a,e,c);r[c]?r[c].p(i,s):(r[c]=M(i),r[c].c(),r[c].m(t.parentNode,t))}for(;c<r.length;c+=1)r[c].d(1);r.length=e.length}},d(a){_(r,a),a&&m(t)}}}function M(a){let t,e,r,s,c,_,g,E=a[30].path+"",I=a[30].message+"";return{c(){t=l("div"),e=l("span"),r=o(E),s=u(),c=l("br"),_=o(I),g=u(),this.h()},l(a){t=d(a,"DIV",{class:!0});var i=n(t);e=d(i,"SPAN",{class:!0});var l=n(e);r=h(l,E),l.forEach(m),s=b(i),c=d(i,"BR",{}),_=h(i,I),g=b(i),i.forEach(m),this.h()},h(){v(e,"class","has-text-weight-bold"),v(t,"class","notification is-danger")},m(a,l){i(a,t,l),f(t,e),f(e,r),f(t,s),f(t,c),f(t,_),f(t,g)},p(a,t){64&t[0]&&E!==(E=a[30].path+"")&&p(r,E),64&t[0]&&I!==(I=a[30].message+"")&&p(_,I)},d(a){a&&m(t)}}}function X(a){let t,e;return{c(){t=l("p"),e=o("Purchase Order is required"),this.h()},l(a){t=d(a,"P",{class:!0});var r=n(t);e=h(r,"Purchase Order is required"),r.forEach(m),this.h()},h(){v(t,"class","help is-danger")},m(a,r){i(a,t,r),f(t,e)},d(a){a&&m(t)}}}function Z(a){let t,e;return{c(){t=l("p"),e=o("Purchase Order Item is required"),this.h()},l(a){t=d(a,"P",{class:!0});var r=n(t);e=h(r,"Purchase Order Item is required"),r.forEach(m),this.h()},h(){v(t,"class","help is-danger")},m(a,r){i(a,t,r),f(t,e)},d(a){a&&m(t)}}}function Y(a){let t,e;return{c(){t=l("p"),e=o("Received is required"),this.h()},l(a){t=d(a,"P",{class:!0});var r=n(t);e=h(r,"Received is required"),r.forEach(m),this.h()},h(){v(t,"class","help is-danger")},m(a,r){i(a,t,r),f(t,e)},d(a){a&&m(t)}}}function aa(a){let t,e,r,s,v,p,g=a[3],E=[];for(let t=0;t<g.length;t+=1)E[t]=ta(z(a,g,t));return{c(){t=l("h5"),e=o("Stock History"),r=u(),s=l("hr"),v=u();for(let a=0;a<E.length;a+=1)E[a].c();p=c()},l(a){t=d(a,"H5",{});var i=n(t);e=h(i,"Stock History"),i.forEach(m),r=b(a),s=d(a,"HR",{}),v=b(a);for(let t=0;t<E.length;t+=1)E[t].l(a);p=c()},m(a,c){i(a,t,c),f(t,e),i(a,r,c),i(a,s,c),i(a,v,c);for(let t=0;t<E.length;t+=1)E[t].m(a,c);i(a,p,c)},p(a,t){if(8&t[0]){let e;for(g=a[3],e=0;e<g.length;e+=1){const r=z(a,g,e);E[e]?E[e].p(r,t):(E[e]=ta(r),E[e].c(),E[e].m(p.parentNode,p))}for(;e<E.length;e+=1)E[e].d(1);E.length=g.length}},d(a){a&&m(t),a&&m(r),a&&m(s),a&&m(v),_(E,a),a&&m(p)}}}function ta(a){let t,e,r,s,c,_,g,E,I,y,k,D,P,V,$,B,R,S,w,x,A,q,N,O,U,j,C,L,H,T,G,Q,F,W,z,J,K,M,X,Z,Y,aa,ta,ea,ra,sa,ca,ia,la,oa,ua,da,na,ha,ma,ba,va,fa,pa,_a,ga,Ea,Ia,ya,ka,Da,Pa,Va,$a,Ba,Ra,Sa,wa,xa,Aa,qa,Na,Oa,Ua,ja,Ca,La,Ha,Ta,Ga,Qa,Fa=a[27].attributes.stock.data.id+"",Wa=a[27].attributes.stock.data.attributes.date+"",za=a[27].attributes.stock.data.attributes.consortium_member?.data.attributes.name+"",Ja=a[27].attributes.stock.data.attributes.warehouse?.data.attributes.name+"",Ka=a[27].id+"",Ma=a[27].attributes.purchase_order_item?.data?.attributes.item?.data?.attributes.name+"",Xa=a[27].attributes.purchase_order_item?.data?.id+"",Za=a[27].attributes.purchase_order_item?.data?.attributes.item?.data?.attributes.category+"",Ya=a[27].attributes.purchase_order_item?.data?.attributes.unit+"",at=a[27].attributes.purchase_order_item?.data?.attributes.pieces+"",tt=a[27].attributes.purchase_order_item?.data?.attributes.quantity+"",et=a[27].attributes.purchase_order_item?.data?.attributes.unitPrice+"",rt=a[27].attributes.purchase_order_item?.data?.attributes.currency+"",st=a[27].attributes.received+"",ct=a[27].attributes.remark+"";return{c(){t=l("div"),e=l("div"),r=o(Fa),s=u(),c=l("div"),_=o(Wa),g=u(),E=l("div"),I=o(za),y=u(),k=l("div"),D=o(Ja),P=u(),V=l("div"),$=l("div"),B=o(Ka),R=u(),S=l("div"),w=l("span"),x=o(Ma),A=o("  - ("),q=o(Xa),N=o(")"),O=u(),U=l("br"),j=u(),C=l("span"),L=o(Za),H=u(),T=l("div"),G=l("span"),Q=o("Unit"),F=u(),W=l("br"),z=u(),J=o(Ya),K=u(),M=l("div"),X=l("span"),Z=o("Pieces"),Y=u(),aa=l("br"),ta=u(),ea=o(at),ra=u(),sa=l("div"),ca=l("span"),ia=o("Quantity"),la=u(),oa=l("br"),ua=u(),da=o(tt),na=u(),ha=l("div"),ma=l("span"),ba=o("Unit Price"),va=u(),fa=l("br"),pa=u(),_a=o(et),ga=u(),Ea=l("div"),Ia=l("span"),ya=o("Currency"),ka=u(),Da=l("br"),Pa=u(),Va=o(rt),$a=u(),Ba=l("div"),Ra=l("span"),Sa=o("Received"),wa=u(),xa=l("br"),Aa=u(),qa=o(st),Na=u(),Oa=l("div"),Ua=l("span"),ja=o("Remark"),Ca=u(),La=l("br"),Ha=u(),Ta=o(ct),Ga=u(),Qa=l("hr"),this.h()},l(a){t=d(a,"DIV",{class:!0});var i=n(t);e=d(i,"DIV",{class:!0});var l=n(e);r=h(l,Fa),l.forEach(m),s=b(i),c=d(i,"DIV",{class:!0});var o=n(c);_=h(o,Wa),o.forEach(m),g=b(i),E=d(i,"DIV",{class:!0});var u=n(E);I=h(u,za),u.forEach(m),y=b(i),k=d(i,"DIV",{class:!0});var v=n(k);D=h(v,Ja),v.forEach(m),i.forEach(m),P=b(a),V=d(a,"DIV",{class:!0});var f=n(V);$=d(f,"DIV",{class:!0});var p=n($);B=h(p,Ka),p.forEach(m),R=b(f),S=d(f,"DIV",{class:!0});var it=n(S);w=d(it,"SPAN",{class:!0});var lt=n(w);x=h(lt,Ma),A=h(lt,"  - ("),q=h(lt,Xa),N=h(lt,")"),lt.forEach(m),O=b(it),U=d(it,"BR",{}),j=b(it),C=d(it,"SPAN",{class:!0});var ot=n(C);L=h(ot,Za),ot.forEach(m),it.forEach(m),H=b(f),T=d(f,"DIV",{class:!0});var ut=n(T);G=d(ut,"SPAN",{class:!0});var dt=n(G);Q=h(dt,"Unit"),dt.forEach(m),F=b(ut),W=d(ut,"BR",{}),z=b(ut),J=h(ut,Ya),ut.forEach(m),K=b(f),M=d(f,"DIV",{class:!0});var nt=n(M);X=d(nt,"SPAN",{class:!0});var ht=n(X);Z=h(ht,"Pieces"),ht.forEach(m),Y=b(nt),aa=d(nt,"BR",{}),ta=b(nt),ea=h(nt,at),nt.forEach(m),ra=b(f),sa=d(f,"DIV",{class:!0});var mt=n(sa);ca=d(mt,"SPAN",{class:!0});var bt=n(ca);ia=h(bt,"Quantity"),bt.forEach(m),la=b(mt),oa=d(mt,"BR",{}),ua=b(mt),da=h(mt,tt),mt.forEach(m),na=b(f),ha=d(f,"DIV",{class:!0});var vt=n(ha);ma=d(vt,"SPAN",{class:!0});var ft=n(ma);ba=h(ft,"Unit Price"),ft.forEach(m),va=b(vt),fa=d(vt,"BR",{}),pa=b(vt),_a=h(vt,et),vt.forEach(m),ga=b(f),Ea=d(f,"DIV",{class:!0});var pt=n(Ea);Ia=d(pt,"SPAN",{class:!0});var _t=n(Ia);ya=h(_t,"Currency"),_t.forEach(m),ka=b(pt),Da=d(pt,"BR",{}),Pa=b(pt),Va=h(pt,rt),pt.forEach(m),$a=b(f),Ba=d(f,"DIV",{class:!0});var gt=n(Ba);Ra=d(gt,"SPAN",{class:!0});var Et=n(Ra);Sa=h(Et,"Received"),Et.forEach(m),wa=b(gt),xa=d(gt,"BR",{}),Aa=b(gt),qa=h(gt,st),gt.forEach(m),Na=b(f),Oa=d(f,"DIV",{class:!0});var It=n(Oa);Ua=d(It,"SPAN",{class:!0});var yt=n(Ua);ja=h(yt,"Remark"),yt.forEach(m),Ca=b(It),La=d(It,"BR",{}),Ha=b(It),Ta=h(It,ct),It.forEach(m),f.forEach(m),Ga=b(a),Qa=d(a,"HR",{}),this.h()},h(){v(e,"class","column is-narrow"),v(c,"class","column"),v(E,"class","column"),v(k,"class","column"),v(t,"class","columns has-text-weight-bold"),v($,"class","column is-narrow gray"),v(w,"class",""),v(C,"class","gray"),v(S,"class","column is-3"),v(G,"class","is-small tag"),v(T,"class","column has-text-centered"),v(X,"class","is-small tag"),v(M,"class","column has-text-centered"),v(ca,"class","is-small tag"),v(sa,"class","column has-text-centered"),v(ma,"class","is-small tag"),v(ha,"class","column has-text-centered"),v(Ia,"class","is-small tag"),v(Ea,"class","column has-text-centered"),v(Ra,"class","is-small tag"),v(Ba,"class","column has-text-centered"),v(Ua,"class","is-small tag"),v(Oa,"class","column has-text-centered"),v(V,"class","columns")},m(a,l){i(a,t,l),f(t,e),f(e,r),f(t,s),f(t,c),f(c,_),f(t,g),f(t,E),f(E,I),f(t,y),f(t,k),f(k,D),i(a,P,l),i(a,V,l),f(V,$),f($,B),f(V,R),f(V,S),f(S,w),f(w,x),f(w,A),f(w,q),f(w,N),f(S,O),f(S,U),f(S,j),f(S,C),f(C,L),f(V,H),f(V,T),f(T,G),f(G,Q),f(T,F),f(T,W),f(T,z),f(T,J),f(V,K),f(V,M),f(M,X),f(X,Z),f(M,Y),f(M,aa),f(M,ta),f(M,ea),f(V,ra),f(V,sa),f(sa,ca),f(ca,ia),f(sa,la),f(sa,oa),f(sa,ua),f(sa,da),f(V,na),f(V,ha),f(ha,ma),f(ma,ba),f(ha,va),f(ha,fa),f(ha,pa),f(ha,_a),f(V,ga),f(V,Ea),f(Ea,Ia),f(Ia,ya),f(Ea,ka),f(Ea,Da),f(Ea,Pa),f(Ea,Va),f(V,$a),f(V,Ba),f(Ba,Ra),f(Ra,Sa),f(Ba,wa),f(Ba,xa),f(Ba,Aa),f(Ba,qa),f(V,Na),f(V,Oa),f(Oa,Ua),f(Ua,ja),f(Oa,Ca),f(Oa,La),f(Oa,Ha),f(Oa,Ta),i(a,Ga,l),i(a,Qa,l)},p(a,t){8&t[0]&&Fa!==(Fa=a[27].attributes.stock.data.id+"")&&p(r,Fa),8&t[0]&&Wa!==(Wa=a[27].attributes.stock.data.attributes.date+"")&&p(_,Wa),8&t[0]&&za!==(za=a[27].attributes.stock.data.attributes.consortium_member?.data.attributes.name+"")&&p(I,za),8&t[0]&&Ja!==(Ja=a[27].attributes.stock.data.attributes.warehouse?.data.attributes.name+"")&&p(D,Ja),8&t[0]&&Ka!==(Ka=a[27].id+"")&&p(B,Ka),8&t[0]&&Ma!==(Ma=a[27].attributes.purchase_order_item?.data?.attributes.item?.data?.attributes.name+"")&&p(x,Ma),8&t[0]&&Xa!==(Xa=a[27].attributes.purchase_order_item?.data?.id+"")&&p(q,Xa),8&t[0]&&Za!==(Za=a[27].attributes.purchase_order_item?.data?.attributes.item?.data?.attributes.category+"")&&p(L,Za),8&t[0]&&Ya!==(Ya=a[27].attributes.purchase_order_item?.data?.attributes.unit+"")&&p(J,Ya),8&t[0]&&at!==(at=a[27].attributes.purchase_order_item?.data?.attributes.pieces+"")&&p(ea,at),8&t[0]&&tt!==(tt=a[27].attributes.purchase_order_item?.data?.attributes.quantity+"")&&p(da,tt),8&t[0]&&et!==(et=a[27].attributes.purchase_order_item?.data?.attributes.unitPrice+"")&&p(_a,et),8&t[0]&&rt!==(rt=a[27].attributes.purchase_order_item?.data?.attributes.currency+"")&&p(Va,rt),8&t[0]&&st!==(st=a[27].attributes.received+"")&&p(qa,st),8&t[0]&&ct!==(ct=a[27].attributes.remark+"")&&p(Ta,ct)},d(a){a&&m(t),a&&m(P),a&&m(V),a&&m(Ga),a&&m(Qa)}}}function ea(a){let t,e,c,_,N,O,U,j,C,L,H,T,F,W,z,J,M,ta,ea,ra,sa,ca,ia,la,oa,ua,da,na,ha,ma,ba,va,fa,pa,_a,ga,Ea,Ia,ya,ka,Da,Pa,Va,$a,Ba,Ra,Sa,wa,xa,Aa,qa,Na,Oa,Ua,ja,Ca,La,Ha,Ta,Ga,Qa,Fa,Wa,za,Ja,Ka,Ma,Xa,Za,Ya,at,tt,et,rt,st,ct,it,lt,ot,ut,dt,nt,ht,mt,bt,vt,ft,pt,_t,gt,Et,It,yt,kt,Dt,Pt,Vt,$t=a[9].hasError("purchase_order.required"),Bt=a[9].hasError("purchase_order_item.required"),Rt=a[9].hasError("received.required"),St=G(a[2])+"",wt=G(a[2]-a[7].value)+"";j=new r({props:{data:s}});let xt=a[6]&&K(a);function At(t){a[19](t)}let qt={items:a[4],listAutoWidth:!0};void 0!==a[10].value&&(qt.value=a[10].value),Va=new Q({props:qt}),g.push((()=>E(Va,"value",At))),Va.$on("select",a[16]);let Nt=$t&&X();function Ot(t){a[20](t)}let Ut={items:a[5]};void 0!==a[8].value&&(Ut.value=a[8].value),Ua=new Q({props:Ut}),g.push((()=>E(Ua,"value",Ot))),Ua.$on("select",a[17]);let jt=Bt&&Z(),Ct=Rt&&Y(),Lt=a[3]&&aa(a);return{c(){t=u(),e=l("br"),c=l("br"),_=u(),N=l("div"),O=l("a"),U=l("span"),I(j.$$.fragment),C=o(" Back"),H=u(),T=l("br"),F=l("br"),W=u(),z=l("div"),J=l("br"),M=l("br"),ta=u(),ea=l("div"),ra=l("div"),sa=l("h3"),ca=o("Edit Stock Item"),ia=u(),la=l("p"),oa=o("Complete the form below and click save."),ua=u(),da=l("div"),na=l("button"),ha=o("Save"),ba=u(),va=l("br"),fa=u(),xt&&xt.c(),pa=u(),_a=l("form"),ga=l("div"),Ea=l("div"),Ia=l("div"),ya=l("label"),ka=o("Purchase Order (*)"),Da=u(),Pa=l("div"),I(Va.$$.fragment),Ba=u(),Nt&&Nt.c(),Ra=u(),Sa=l("div"),wa=l("div"),xa=l("div"),Aa=l("label"),qa=o("Item (*)"),Na=u(),Oa=l("div"),I(Ua.$$.fragment),Ca=u(),jt&&jt.c(),La=u(),Ha=l("div"),Ta=l("div"),Ga=l("label"),Qa=o("Received"),Fa=l("br"),Wa=u(),za=l("input"),Ja=u(),Ct&&Ct.c(),Ka=u(),Ma=l("div"),Xa=l("div"),Za=l("label"),Ya=o("Remark"),at=l("br"),tt=u(),et=l("div"),rt=l("textarea"),st=u(),ct=l("div"),it=l("div"),lt=l("br"),ot=u(),ut=l("span"),dt=o("Remaining Amount -"),nt=u(),ht=o(St),mt=u(),bt=l("br"),vt=u(),ft=l("span"),pt=o("Differnece -"),_t=u(),gt=o(wt),Et=u(),Lt&&Lt.c(),It=u(),yt=l("br"),kt=l("br"),this.h()},l(a){y('[data-svelte="svelte-qfc7lk"]',document.head).forEach(m),t=b(a),e=d(a,"BR",{}),c=d(a,"BR",{}),_=b(a),N=d(a,"DIV",{class:!0});var r=n(N);O=d(r,"A",{href:!0,class:!0});var s=n(O);U=d(s,"SPAN",{class:!0});var i=n(U);k(j.$$.fragment,i),i.forEach(m),C=h(s," Back"),s.forEach(m),H=b(r),T=d(r,"BR",{}),F=d(r,"BR",{}),W=b(r),z=d(r,"DIV",{class:!0});var l=n(z);J=d(l,"BR",{}),M=d(l,"BR",{}),ta=b(l),ea=d(l,"DIV",{class:!0});var o=n(ea);ra=d(o,"DIV",{class:!0});var u=n(ra);sa=d(u,"H3",{class:!0});var v=n(sa);ca=h(v,"Edit Stock Item"),v.forEach(m),ia=b(u),la=d(u,"P",{class:!0});var f=n(la);oa=h(f,"Complete the form below and click save."),f.forEach(m),u.forEach(m),ua=b(o),da=d(o,"DIV",{class:!0});var p=n(da);na=d(p,"BUTTON",{class:!0});var g=n(na);ha=h(g,"Save"),g.forEach(m),p.forEach(m),o.forEach(m),ba=b(l),va=d(l,"BR",{}),fa=b(l),xt&&xt.l(l),pa=b(l),_a=d(l,"FORM",{});var E=n(_a);ga=d(E,"DIV",{class:!0});var I=n(ga);Ea=d(I,"DIV",{class:!0});var D=n(Ea);Ia=d(D,"DIV",{class:!0});var P=n(Ia);ya=d(P,"LABEL",{for:!0,class:!0});var V=n(ya);ka=h(V,"Purchase Order (*)"),V.forEach(m),Da=b(P),Pa=d(P,"DIV",{class:!0});var $=n(Pa);k(Va.$$.fragment,$),$.forEach(m),Ba=b(P),Nt&&Nt.l(P),P.forEach(m),D.forEach(m),I.forEach(m),Ra=b(E),Sa=d(E,"DIV",{class:!0});var B=n(Sa);wa=d(B,"DIV",{class:!0});var R=n(wa);xa=d(R,"DIV",{class:!0});var S=n(xa);Aa=d(S,"LABEL",{for:!0,class:!0});var w=n(Aa);qa=h(w,"Item (*)"),w.forEach(m),Na=b(S),Oa=d(S,"DIV",{class:!0});var x=n(Oa);k(Ua.$$.fragment,x),x.forEach(m),Ca=b(S),jt&&jt.l(S),S.forEach(m),R.forEach(m),B.forEach(m),La=b(E),Ha=d(E,"DIV",{class:!0});var A=n(Ha);Ta=d(A,"DIV",{class:!0});var q=n(Ta);Ga=d(q,"LABEL",{for:!0,class:!0});var L=n(Ga);Qa=h(L,"Received"),L.forEach(m),Fa=d(q,"BR",{}),Wa=b(q),za=d(q,"INPUT",{type:!0,placeholder:!0,class:!0}),Ja=b(q),Ct&&Ct.l(q),q.forEach(m),Ka=b(A),Ma=d(A,"DIV",{class:!0});var G=n(Ma);Xa=d(G,"DIV",{class:!0});var Q=n(Xa);Za=d(Q,"LABEL",{for:!0,class:!0});var K=n(Za);Ya=h(K,"Remark"),K.forEach(m),at=d(Q,"BR",{}),tt=b(Q),et=d(Q,"DIV",{class:!0});var X=n(et);rt=d(X,"TEXTAREA",{rows:!0,class:!0}),n(rt).forEach(m),X.forEach(m),Q.forEach(m),G.forEach(m),A.forEach(m),st=b(E),ct=d(E,"DIV",{class:!0});var Z=n(ct);it=d(Z,"DIV",{class:!0});var Y=n(it);lt=d(Y,"BR",{}),ot=b(Y),ut=d(Y,"SPAN",{class:!0});var aa=n(ut);dt=h(aa,"Remaining Amount -"),aa.forEach(m),nt=b(Y),ht=h(Y,St),mt=b(Y),bt=d(Y,"BR",{}),vt=b(Y),ft=d(Y,"SPAN",{class:!0});var ma=n(ft);pt=h(ma,"Differnece -"),ma.forEach(m),_t=b(Y),gt=h(Y,wt),Y.forEach(m),Z.forEach(m),Et=b(E),Lt&&Lt.l(E),E.forEach(m),It=b(l),yt=d(l,"BR",{}),kt=d(l,"BR",{}),l.forEach(m),r.forEach(m),this.h()},h(){document.title="Edit Stock Item",v(U,"class","icon is-small"),v(O,"href",L="stocks/edit/"+a[0]),v(O,"class","has-text-dark"),v(sa,"class","my-0"),v(la,"class","gray py-0"),v(ra,"class","column"),na.disabled=ma=!a[9].valid||!a[9].dirty,v(na,"class","button is-dark my-2 px-5 py-2 has-text-weight-bold"),v(da,"class","column has-text-right"),v(ea,"class","columns"),v(ya,"for",""),v(ya,"class","gray"),v(Pa,"class","control"),v(Ia,"class","field"),v(Ea,"class","column"),v(ga,"class","columns"),v(Aa,"for",""),v(Aa,"class","gray"),v(Oa,"class","control"),v(xa,"class","field"),v(wa,"class","column"),v(Sa,"class","columns"),v(Ga,"for",""),v(Ga,"class","gray"),v(za,"type","number"),v(za,"placeholder","Unit Price"),v(za,"class","input svelte-1985fv4"),D(za,"is-danger",a[2]-a[7].value<0),v(Ta,"class","column"),v(Za,"for",""),v(Za,"class","gray"),v(rt,"rows","1"),v(rt,"class","textarea"),v(et,"class","control is-fullwidth"),v(Xa,"class","field"),v(Ma,"class","column"),v(Ha,"class","columns"),v(ut,"class","has-text-weight-bold"),v(ft,"class","has-text-weight-bold"),v(it,"class","column has-text-right"),v(ct,"class","columns"),v(z,"class","card px-6 svelte-1985fv4"),v(N,"class","container px-6")},m(r,s){i(r,t,s),i(r,e,s),i(r,c,s),i(r,_,s),i(r,N,s),f(N,O),f(O,U),P(j,U,null),f(O,C),f(N,H),f(N,T),f(N,F),f(N,W),f(N,z),f(z,J),f(z,M),f(z,ta),f(z,ea),f(ea,ra),f(ra,sa),f(sa,ca),f(ra,ia),f(ra,la),f(la,oa),f(ea,ua),f(ea,da),f(da,na),f(na,ha),f(z,ba),f(z,va),f(z,fa),xt&&xt.m(z,null),f(z,pa),f(z,_a),f(_a,ga),f(ga,Ea),f(Ea,Ia),f(Ia,ya),f(ya,ka),f(Ia,Da),f(Ia,Pa),P(Va,Pa,null),f(Ia,Ba),Nt&&Nt.m(Ia,null),f(_a,Ra),f(_a,Sa),f(Sa,wa),f(wa,xa),f(xa,Aa),f(Aa,qa),f(xa,Na),f(xa,Oa),P(Ua,Oa,null),f(xa,Ca),jt&&jt.m(xa,null),f(_a,La),f(_a,Ha),f(Ha,Ta),f(Ta,Ga),f(Ga,Qa),f(Ta,Fa),f(Ta,Wa),f(Ta,za),V(za,a[7].value),f(Ta,Ja),Ct&&Ct.m(Ta,null),f(Ha,Ka),f(Ha,Ma),f(Ma,Xa),f(Xa,Za),f(Za,Ya),f(Xa,at),f(Xa,tt),f(Xa,et),f(et,rt),V(rt,a[1]),f(_a,st),f(_a,ct),f(ct,it),f(it,lt),f(it,ot),f(it,ut),f(ut,dt),f(it,nt),f(it,ht),f(it,mt),f(it,bt),f(it,vt),f(it,ft),f(ft,pt),f(it,_t),f(it,gt),f(_a,Et),Lt&&Lt.m(_a,null),f(z,It),f(z,yt),f(z,kt),Dt=!0,Pt||(Vt=[$(na,"click",B(a[15])),$(za,"input",a[21]),$(rt,"input",a[22])],Pt=!0)},p(a,t){(!Dt||1&t[0]&&L!==(L="stocks/edit/"+a[0]))&&v(O,"href",L),(!Dt||512&t[0]&&ma!==(ma=!a[9].valid||!a[9].dirty))&&(na.disabled=ma),a[6]?xt?xt.p(a,t):(xt=K(a),xt.c(),xt.m(z,pa)):xt&&(xt.d(1),xt=null);const e={};16&t[0]&&(e.items=a[4]),!$a&&1024&t[0]&&($a=!0,e.value=a[10].value,R((()=>$a=!1))),Va.$set(e),512&t[0]&&($t=a[9].hasError("purchase_order.required")),$t?Nt||(Nt=X(),Nt.c(),Nt.m(Ia,null)):Nt&&(Nt.d(1),Nt=null);const r={};32&t[0]&&(r.items=a[5]),!ja&&256&t[0]&&(ja=!0,r.value=a[8].value,R((()=>ja=!1))),Ua.$set(r),512&t[0]&&(Bt=a[9].hasError("purchase_order_item.required")),Bt?jt||(jt=Z(),jt.c(),jt.m(xa,null)):jt&&(jt.d(1),jt=null),128&t[0]&&S(za.value)!==a[7].value&&V(za,a[7].value),132&t[0]&&D(za,"is-danger",a[2]-a[7].value<0),512&t[0]&&(Rt=a[9].hasError("received.required")),Rt?Ct||(Ct=Y(),Ct.c(),Ct.m(Ta,null)):Ct&&(Ct.d(1),Ct=null),2&t[0]&&V(rt,a[1]),(!Dt||4&t[0])&&St!==(St=G(a[2])+"")&&p(ht,St),(!Dt||132&t[0])&&wt!==(wt=G(a[2]-a[7].value)+"")&&p(gt,wt),a[3]?Lt?Lt.p(a,t):(Lt=aa(a),Lt.c(),Lt.m(_a,null)):Lt&&(Lt.d(1),Lt=null)},i(a){Dt||(w(j.$$.fragment,a),w(Va.$$.fragment,a),w(Ua.$$.fragment,a),Dt=!0)},o(a){x(j.$$.fragment,a),x(Va.$$.fragment,a),x(Ua.$$.fragment,a),Dt=!1},d(a){a&&m(t),a&&m(e),a&&m(c),a&&m(_),a&&m(N),A(j),xt&&xt.d(),A(Va),Nt&&Nt.d(),A(Ua),jt&&jt.d(),Ct&&Ct.d(),Lt&&Lt.d(),Pt=!1,q(Vt)}}}async function ra(a){return{slug:parseInt(a.params.slug)}}function sa(a,t,e){let r,s,c,i,l,{slug:o}=t;const u=L("purchase_order",null,[H()]);N(a,u,(a=>e(10,i=a)));const d=L("purchase_order_item",null,[H()]);N(a,d,(a=>e(8,s=a)));const n=L("received","",[H()]);N(a,n,(a=>e(7,r=a)));let h="",m=0,b=[];const v=T(u,d,n);N(a,v,(a=>e(9,c=a)));let f,p=[],_=[];async function g(){try{let a={populate:["stock","stock.consortium_member","stock.warehouse","purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]};a=F.stringify(a,{encodeValuesOnly:!0});let t=await C("stock-items/"+o,a);console.log("Get Stock Item by ID ",t),async function(a){u.set(""),d.set(""),e(2,m=0),e(3,b=[]);try{let t={populate:{consortium_member:{populate:"*"},purchase_order_items:{populate:"*"}},filters:{consortium_member:{id:{$in:[a]}}},"pagination[limit]":-1};t=F.stringify(t,{encodeValuesOnly:!0});let r=await C("purchase-orders",t);console.log("Get Purchase Orders ",r),e(4,p=r.data.map((a=>({value:a.id,label:"PO# - "+a.attributes.poNumber+"  ------- Date   "+a.attributes.date+"    ID    "+a.id,data:a}))))}catch(a){console.log("Error Purchase Orders ",a)}}(t.data?.attributes.stock.data?.attributes.consortium_member.data?.id),u.set({value:t.data.attributes.purchase_order_item.data.attributes.purchase_order.data?.id,label:"PO# - "+t.data.attributes.purchase_order_item.data.attributes.purchase_order.data?.attributes.poNumber+"  ------- Date   "+t.data.attributes.purchase_order_item.data.attributes.purchase_order.data?.attributes.date+"    ID    "+t.data.attributes.purchase_order_item.data.attributes.purchase_order.data?.id,data:t.data.attributes.purchase_order_item.data.attributes.purchase_order.data}),d.set({value:t.data.attributes.purchase_order_item.data.id,label:t.data.attributes.purchase_order_item.data?.attributes.item.data.attributes.name+"-"+t.data.attributes.purchase_order_item.data?.attributes.item.data.attributes.category+"  --- Unit - "+t.data.attributes.purchase_order_item.data?.attributes.unit+" - Pieces - "+t.data.attributes.purchase_order_item.data?.attributes.pieces+" - Quantity - "+t.data.attributes.purchase_order_item.data?.attributes.quantity+" - Unit Price - "+t.data.attributes.purchase_order_item.data?.attributes.unitPrice+" - Currency - "+t.data.attributes.purchase_order_item.data?.attributes.currency+"    ID    "+t.data.attributes.purchase_order_item.data?.id,data:t.data.attributes.purchase_order_item.data}),n.set(t.data.attributes.received),e(1,h=t.data.attributes.remark),e(0,l=t.data?.attributes.stock?.data?.id)}catch(a){console.log("Error get Stock Item Item by ID ",a)}}return a.$$set=a=>{"slug"in a&&e(18,o=a.slug)},a.$$.update=()=>{262144&a.$$.dirty[0]&&o&&g()},[l,h,m,b,p,_,f,r,s,c,i,u,d,n,v,async function(){if(await v.validate(),c.valid&&!(m-r.value<0))try{let a={populate:["stock","stock.consortium_member","purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]};a=F.stringify(a,{encodeValuesOnly:!0});let t=await O({path:"stock-items/"+o+"?"+a,data:{data:{purchase_order_item:s.value.value,received:r.value,remark:h}}});console.log("Edit Stock Item Request  ",t),t.data?.id&&(U.push("Stock Item Edited Successfully!",{duration:2e4,theme:{"--toastBackground":"#48BB78","--toastBarBackground":"#2F855A"}}),W("Stock Item",t.data,"Edit",t.data.id),j("stocks/edit/"+l))}catch(a){console.log("Error Edit Stock Item   ",a),e(6,f=a.error?.details.errors),U.push("Stock Item Could Not Be Edited! \n\n"+a.error?.message,{duration:2e4,theme:{"--toastBackground":"#bb4848","--toastBarBackground":"#852f2f"}})}},async function(a){a.detail?.value&&p.length>0&&(console.log(p),e(5,_=p.filter((t=>t.value==a.detail.value))[0].data?.attributes.purchase_order_items.data),e(5,_=_.map((a=>({value:a.id,label:a.attributes.item.data.attributes.name+"-"+a.attributes.item.data.attributes.category+"  --- Unit - "+a.attributes.unit+" - Pieces - "+a.attributes.pieces+" - Quantity - "+a.attributes.quantity+" - Unit Price - "+a.attributes.unitPrice+" - Currency - "+a.attributes.currency+"    ID    "+a.id,data:a})))))},async function(a){if(a.detail?.data)try{let t={populate:["stock","stock.consortium_member","stock.warehouse","purchase_order_item","purchase_order_item.item"],filters:{purchase_order_item:{id:{$in:[a.detail.data.id]}}},"pagination[limit]":-1};t=F.stringify(t,{encodeValuesOnly:!0});let r=await C("stock-items",t);console.log("Get Stock Items ",r);let s=0;return e(3,b=r.data.filter((a=>a.attributes.stock.data))),r.data.forEach((a=>{console.log(a.id!=o),a.id!=o&&(s+=parseInt(a.attributes.received))})),void e(2,m=parseInt(a.detail.data.attributes.quantity)-s)}catch(a){console.log("Error Stock Items ",a)}e(2,m=0)},o,function(t){a.$$.not_equal(i.value,t)&&(i.value=t,u.set(i))},function(t){a.$$.not_equal(s.value,t)&&(s.value=t,d.set(s))},function(){r.value=S(this.value),n.set(r)},function(){h=this.value,e(1,h)}]}class ca extends a{constructor(a){super(),t(this,a,sa,ea,e,{slug:18},null,[-1,-1])}}export{ca as default,ra as preload};
