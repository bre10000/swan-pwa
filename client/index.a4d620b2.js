import{S as e,i as t,s as a,e as s,t as r,c as o,a as c,b as i,d as l,f as n,h as u,j as d,k as m,I as h,l as p,m as f,n as b,p as g,q as $,r as _,v,w as k,x as w,y as E,z as y,A as D,B as x,C as S,D as P,E as A,F as V,G as B,H as R,J as I,u as N,g as T,o as C,K as F,L as j,M,N as U}from"./client.e36e64da.js";import{l as H}from"./index.79acf2d4.js";import{D as O}from"./DeleteConfirmation.b78e7fe6.js";import{D as q}from"./DataTableDetails.e6be7de4.js";import{e as G}from"./csvGenerator.56fc5e7e.js";import{e as L}from"./exportPDFAlternate.b140167e.js";import{c as W}from"./log.98c6314c.js";import"./SelectedColumns.e82dc90b.js";import"./SelectedColumns.61150ba7.js";import"./jspdf.plugin.autotable.dc15019a.js";function Y(e){let t,a,h=e[3].total+"";return{c(){t=s("span"),a=r(h),this.h()},l(e){t=o(e,"SPAN",{class:!0});var s=c(t);a=i(s,h),s.forEach(l),this.h()},h(){n(t,"class","gray has-text-weight-light ml-2")},m(e,s){u(e,t,s),d(t,a)},p(e,t){8&t&&h!==(h=e[3].total+"")&&m(a,h)},d(e){e&&l(t)}}}function z(e){let t,a,m,p,b,D,x,P,A,V,B,R,I,N,T,C;return x=new h({props:{data:f,scale:"3"}}),{c(){t=s("div"),a=s("br"),m=s("br"),p=s("br"),b=s("br"),D=y(),g(x.$$.fragment),P=y(),A=s("p"),V=r("Uh oh! nothing found on database."),B=y(),R=s("br"),I=s("br"),N=s("br"),T=s("br"),this.h()},l(e){t=o(e,"DIV",{class:!0});var s=c(t);a=o(s,"BR",{}),m=o(s,"BR",{}),p=o(s,"BR",{}),b=o(s,"BR",{}),D=S(s),$(x.$$.fragment,s),P=S(s),A=o(s,"P",{class:!0});var r=c(A);V=i(r,"Uh oh! nothing found on database."),r.forEach(l),B=S(s),R=o(s,"BR",{}),I=o(s,"BR",{}),N=o(s,"BR",{}),T=o(s,"BR",{}),s.forEach(l),this.h()},h(){n(A,"class","gray"),n(t,"class","has-text-centered")},m(e,s){u(e,t,s),d(t,a),d(t,m),d(t,p),d(t,b),d(t,D),_(x,t,null),d(t,P),d(t,A),d(A,V),d(t,B),d(t,R),d(t,I),d(t,N),d(t,T),C=!0},p:v,i(e){C||(k(x.$$.fragment,e),C=!0)},o(e){w(x.$$.fragment,e),C=!1},d(e){e&&l(t),E(x)}}}function J(e){let t,a;return t=new q({props:{pagination:e[3],columns:e[4],columnsDetails:e[5],detailVariable:X,rows:e[2],options:e[6]}}),t.$on("clickCol",e[9]),t.$on("changePage",e[8]),t.$on("deleteRow",e[12]),t.$on("editRow",e[10]),t.$on("clickRow",e[10]),t.$on("printRow",e[11]),{c(){g(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,s){_(t,e,s),a=!0},p(e,a){const s={};8&a&&(s.pagination=e[3]),4&a&&(s.rows=e[2]),t.$set(s)},i(e){a||(k(t.$$.fragment,e),a=!0)},o(e){w(t.$$.fragment,e),a=!1},d(e){E(t,e)}}}function K(e){let t,a;return t=new O({}),t.$on("confirm",e[13]),t.$on("dismiss",e[19]),{c(){g(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,s){_(t,e,s),a=!0},p:v,i(e){a||(k(t.$$.fragment,e),a=!0)},o(e){w(t.$$.fragment,e),a=!1},d(e){E(t,e)}}}function Q(e){let t,a,m,v,N,T,C,F,M,U,H,O,q,G,L,W,Q,X,Z,ee,te,ae,se,re,oe,ce,ie,le,ne,ue,de,me,he,pe,fe,be,ge,$e,_e,ve,ke,we,Ee,ye,De,xe,Se,Pe,Ae,Ve,Be,Re,Ie,Ne,Te,Ce,Fe,je,Me,Ue,He,Oe,qe,Ge,Le,We,Ye,ze,Je,Ke,Qe,Xe=e[3]&&Y(e);G=new h({props:{data:p}}),ce=new h({props:{data:f}}),ve=new h({props:{data:b}});const Ze=[J,z],et=[];function tt(e,t){return e[2]?.length>0?0:1}Me=tt(e),Ue=et[Me]=Ze[Me](e);let at=e[1]&&K(e);return{c(){t=y(),a=s("br"),m=s("br"),v=y(),N=s("div"),T=s("div"),C=s("div"),F=s("h3"),M=r("Stocks\r\n                "),Xe&&Xe.c(),U=y(),H=s("div"),O=s("a"),q=s("span"),g(G.$$.fragment),L=y(),W=s("span"),Q=r("Add a Stock"),X=y(),Z=s("div"),ee=s("div"),te=s("div"),ae=s("div"),se=s("input"),re=y(),oe=s("span"),g(ce.$$.fragment),ie=y(),le=s("div"),ne=s("button"),ue=r("Search"),de=y(),me=s("div"),he=s("div"),pe=s("div"),fe=s("button"),be=s("span"),ge=r("Export To Excel or PDF"),$e=y(),_e=s("span"),g(ve.$$.fragment),ke=y(),we=s("div"),Ee=s("div"),ye=s("a"),De=r("Export Current Page to Excel"),xe=y(),Se=s("a"),Pe=r("Export Current Page to PDF"),Ae=y(),Ve=s("hr"),Be=y(),Re=s("a"),Ie=r("Export All to Excel"),Ne=y(),Te=s("a"),Ce=r("Export All to PDF"),Fe=y(),je=s("div"),Ue.c(),He=y(),Oe=s("br"),qe=s("br"),Ge=s("br"),Le=s("br"),We=s("br"),Ye=y(),at&&at.c(),ze=D(),this.h()},l(e){x('[data-svelte="svelte-13tnnf4"]',document.head).forEach(l),t=S(e),a=o(e,"BR",{}),m=o(e,"BR",{}),v=S(e),N=o(e,"DIV",{class:!0});var s=c(N);T=o(s,"DIV",{class:!0});var r=c(T);C=o(r,"DIV",{class:!0});var n=c(C);F=o(n,"H3",{});var u=c(F);M=i(u,"Stocks\r\n                "),Xe&&Xe.l(u),u.forEach(l),n.forEach(l),U=S(r),H=o(r,"DIV",{class:!0});var d=c(H);O=o(d,"A",{href:!0,class:!0});var h=c(O);q=o(h,"SPAN",{class:!0});var p=c(q);$(G.$$.fragment,p),p.forEach(l),L=S(h),W=o(h,"SPAN",{class:!0});var f=c(W);Q=i(f,"Add a Stock"),f.forEach(l),h.forEach(l),d.forEach(l),r.forEach(l),X=S(s),Z=o(s,"DIV",{class:!0});var b=c(Z);ee=o(b,"DIV",{class:!0});var g=c(ee);te=o(g,"DIV",{class:!0,style:!0});var _=c(te);ae=o(_,"DIV",{class:!0});var k=c(ae);se=o(k,"INPUT",{class:!0,type:!0,placeholder:!0}),re=S(k),oe=o(k,"SPAN",{class:!0});var w=c(oe);$(ce.$$.fragment,w),w.forEach(l),k.forEach(l),ie=S(_),le=o(_,"DIV",{class:!0});var E=c(le);ne=o(E,"BUTTON",{class:!0});var y=c(ne);ue=i(y,"Search"),y.forEach(l),E.forEach(l),_.forEach(l),g.forEach(l),de=S(b),me=o(b,"DIV",{class:!0});var P=c(me);he=o(P,"DIV",{class:!0});var A=c(he);pe=o(A,"DIV",{class:!0});var V=c(pe);fe=o(V,"BUTTON",{class:!0,"aria-haspopup":!0,"aria-controls":!0});var B=c(fe);be=o(B,"SPAN",{});var R=c(be);ge=i(R,"Export To Excel or PDF"),R.forEach(l),$e=S(B),_e=o(B,"SPAN",{class:!0});var I=c(_e);$(ve.$$.fragment,I),I.forEach(l),B.forEach(l),V.forEach(l),ke=S(A),we=o(A,"DIV",{class:!0,id:!0,role:!0});var j=c(we);Ee=o(j,"DIV",{class:!0});var Y=c(Ee);ye=o(Y,"A",{href:!0,class:!0});var z=c(ye);De=i(z,"Export Current Page to Excel"),z.forEach(l),xe=S(Y),Se=o(Y,"A",{href:!0,class:!0});var J=c(Se);Pe=i(J,"Export Current Page to PDF"),J.forEach(l),Ae=S(Y),Ve=o(Y,"HR",{class:!0}),Be=S(Y),Re=o(Y,"A",{href:!0,class:!0});var K=c(Re);Ie=i(K,"Export All to Excel"),K.forEach(l),Ne=S(Y),Te=o(Y,"A",{href:!0,class:!0});var Me=c(Te);Ce=i(Me,"Export All to PDF"),Me.forEach(l),Y.forEach(l),j.forEach(l),A.forEach(l),P.forEach(l),b.forEach(l),Fe=S(s),je=o(s,"DIV",{class:!0});var Je=c(je);Ue.l(Je),Je.forEach(l),He=S(s),Oe=o(s,"BR",{}),qe=o(s,"BR",{}),Ge=o(s,"BR",{}),Le=o(s,"BR",{}),We=o(s,"BR",{}),s.forEach(l),Ye=S(e),at&&at.l(e),ze=D(),this.h()},h(){document.title="Stocks",n(C,"class","column"),n(q,"class","icon"),n(W,"class","has-text-white has-text-weight-bold"),n(O,"href","stocks/add"),n(O,"class","button is-dark px-5"),n(H,"class","column has-text-right"),n(T,"class","columns"),n(se,"class","input is-dark"),n(se,"type","search"),n(se,"placeholder","search"),n(oe,"class","icon is-small is-left"),n(ae,"class","control has-icons-left"),n(ne,"class","button is-dark has-text-weight-bold"),n(le,"class","control"),n(te,"class","field has-addons"),P(te,"width","500px"),n(ee,"class","column"),n(_e,"class","icon is-small"),n(fe,"class","button"),n(fe,"aria-haspopup","true"),n(fe,"aria-controls","dropdown-menu"),n(pe,"class","dropdown-trigger"),n(ye,"href","#"),n(ye,"class","dropdown-item"),n(Se,"href","#"),n(Se,"class","dropdown-item"),n(Ve,"class","dropdown-divider"),n(Re,"href","#"),n(Re,"class","dropdown-item"),n(Te,"href","#"),n(Te,"class","dropdown-item"),n(Ee,"class","dropdown-content has-text-left"),n(we,"class","dropdown-menu"),n(we,"id","dropdown-menu"),n(we,"role","menu"),n(he,"class","dropdown is-hoverable"),n(me,"class","column has-text-right"),n(Z,"class","columns"),n(je,"class","card"),n(N,"class","container px-6")},m(s,r){u(s,t,r),u(s,a,r),u(s,m,r),u(s,v,r),u(s,N,r),d(N,T),d(T,C),d(C,F),d(F,M),Xe&&Xe.m(F,null),d(T,U),d(T,H),d(H,O),d(O,q),_(G,q,null),d(O,L),d(O,W),d(W,Q),d(N,X),d(N,Z),d(Z,ee),d(ee,te),d(te,ae),d(ae,se),A(se,e[0]),d(ae,re),d(ae,oe),_(ce,oe,null),d(te,ie),d(te,le),d(le,ne),d(ne,ue),d(Z,de),d(Z,me),d(me,he),d(he,pe),d(pe,fe),d(fe,be),d(be,ge),d(fe,$e),d(fe,_e),_(ve,_e,null),d(he,ke),d(he,we),d(we,Ee),d(Ee,ye),d(ye,De),d(Ee,xe),d(Ee,Se),d(Se,Pe),d(Ee,Ae),d(Ee,Ve),d(Ee,Be),d(Ee,Re),d(Re,Ie),d(Ee,Ne),d(Ee,Te),d(Te,Ce),d(N,Fe),d(N,je),et[Me].m(je,null),d(N,He),d(N,Oe),d(N,qe),d(N,Ge),d(N,Le),d(N,We),u(s,Ye,r),at&&at.m(s,r),u(s,ze,r),Je=!0,Ke||(Qe=[V(se,"input",e[18]),V(ne,"click",e[7]),V(ye,"click",B(e[14])),V(Se,"click",B(e[15])),V(Re,"click",B(e[16])),V(Te,"click",B(e[17]))],Ke=!0)},p(e,[t]){e[3]?Xe?Xe.p(e,t):(Xe=Y(e),Xe.c(),Xe.m(F,null)):Xe&&(Xe.d(1),Xe=null),1&t&&A(se,e[0]);let a=Me;Me=tt(e),Me===a?et[Me].p(e,t):(j(),w(et[a],1,1,(()=>{et[a]=null})),R(),Ue=et[Me],Ue?Ue.p(e,t):(Ue=et[Me]=Ze[Me](e),Ue.c()),k(Ue,1),Ue.m(je,null)),e[1]?at?(at.p(e,t),2&t&&k(at,1)):(at=K(e),at.c(),k(at,1),at.m(ze.parentNode,ze)):at&&(j(),w(at,1,1,(()=>{at=null})),R())},i(e){Je||(k(G.$$.fragment,e),k(ce.$$.fragment,e),k(ve.$$.fragment,e),k(Ue),k(at),Je=!0)},o(e){w(G.$$.fragment,e),w(ce.$$.fragment,e),w(ve.$$.fragment,e),w(Ue),w(at),Je=!1},d(e){e&&l(t),e&&l(a),e&&l(m),e&&l(v),e&&l(N),Xe&&Xe.d(),E(G),E(ce),E(ve),et[Me].d(),e&&l(Ye),at&&at.d(e),e&&l(ze),Ke=!1,I(Qe)}}}let X="stock_items";function Z(e){let t=[];return e.forEach((e=>{t.push([e.id,e.attributes.warehouse.data.attributes.name,e.attributes.consortium_member.data.attributes.name,e.attributes.date,"-","-","-","-","-","-","-","-"]),e.attributes.stock_items.data.forEach((e=>{t.push(["-","-","-","-",e.id,e.attributes.purchase_order_item.data.attributes.purchase_order.data.attributes.poNumber,e.attributes.purchase_order_item.data.attributes.item.data.attributes.name,e.attributes.purchase_order_item.data.attributes.unit,e.attributes.purchase_order_item.data.attributes.pieces,e.attributes.purchase_order_item.data.attributes.quantity,e.attributes.purchase_order_item.data.attributes.currency,e.attributes.purchase_order_item.data.attributes.unitPrice,e.attributes.received])}))})),t}function ee(e,t,a){const s=N.subscribe((e=>{!e.loggedIn&&e.fetched?T("login"):e.data&&m()}));C(s);let r,o="",c="",i=!1,l=[];const n=[{key:"id",title:"ID",sortable:!0,filterValue:e=>Math.floor(e.id/10),interval:10,filterType:"numeric",headerClass:"has-text-left",selected:!0},{key:"warehouse",title:"Warehouse",sortable:!0,filterValue:e=>e.first_name.charAt(0).toLowerCase(),filterType:"string",selected:!0},{key:"consortium_member",title:"Consortium Member",sortable:!0,filterValue:e=>e.last_name.charAt(0).toLowerCase(),filterType:"string",selected:!0},{key:"date",title:"Date",sortable:!0,filterValue:e=>e.last_name.charAt(0).toLowerCase(),filterType:"string",selected:!0}],u=[{key:"id",title:"ID",sortable:!0,selected:!0},{key:"poNumber",title:"PO#",sortable:!0,selected:!0},{key:"item",title:"ITEM",sortable:!0,selected:!0},{key:"unit",title:"Unit",sortable:!0,selected:!0},{key:"pieces",title:"Pieces",sortable:!0,selected:!0},{key:"quantity",title:"Quantity",sortable:!0,selected:!0},{key:"currency",title:"Currency",sortable:!0,selected:!0},{key:"unitPrice",title:"Unit Price",sortable:!0,selected:!0},{key:"received",title:"Received",sortable:!0,selected:!0}];let d;async function m(e,t,s){try{let r={filters:e||{},sort:t||"id:desc","pagination[page]":s||1,populate:{consortium_member:{populate:"*"},warehouse:{populate:"*"},stock_items:{populate:["purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]}}};r=H.stringify(r,{encodeValuesOnly:!0});let o=await F("stocks",r);console.log("Get Stocks Request - ",o),a(2,l=o.data),a(3,d=o.meta?.pagination)}catch(e){console.warn("Error Getting Stocks - ",e)}}function h(){m(p(),c)}function p(){return{$or:[{date:{$containsi:o}},{consortium_member:{name:{$containsi:o}}},{warehouse:{name:{$containsi:o}}},{stock_items:{purchase_order_item:{item:{name:{$containsi:o}}}}},{stock_items:{purchase_order_item:{item:{category:{$containsi:o}}}}},{stock_items:{purchase_order_item:{unit:{$containsi:o}}}},{stock_items:{purchase_order_item:{purchase_order:{poNumber:{$containsi:o}}}}}]}}return[o,i,l,d,n,u,{title:"Stocks Table",showFilterHeader:!1,showSelect:!1,showDetails:!1,showPrint:!0,showActions:!0,showFooter:!1},h,function(e){m(p(),c,e.detail.newPage)},function(e){c=e.detail.key,c=c.replace("consortium_member","consortium_member.name"),c=c.replace("warehouse","warehouse.name"),m(p(),c,e.detail.newPage)},function(e){T("stocks/edit/"+e.detail.row.id)},function(e){T("reports/single/stock/"+e.detail.row.id)},function(e){r=e.detail.row,a(1,i=!0)},async function(){a(1,i=!1);try{let e=await M("stocks/"+r.id,null);console.log("Delete Stock Request  ",e),e.data?.id&&(U.push("Stock Deleted Successfully!",{duration:2e4,theme:{"--toastBackground":"#48BB78","--toastBarBackground":"#2F855A"}}),W("Stock",r,"Delete",e.data.id),h())}catch(e){console.log("Error Delete Stock   ",e)}},function(){let e=new Date,t=`"SWAN "Stocks ${e.getFullYear()}-${e.getMonth()}-${e.getDate()} T${e.getHours()}-${e.getMinutes()}-${e.getSeconds()}.csv`,a=Z(l);a=[n.concat(u).map((e=>e.title)),...a],G(t,a)},function(){L("Stocks",Z(l),n.concat(u))},async function(){try{let e={populate:{consortium_member:{populate:"*"},warehouse:{populate:"*"},stock_items:{populate:["purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]}},"pagination[limit]":-1};e=H.stringify(e,{encodeValuesOnly:!0});let t=await F("stocks",e),a=new Date,s=`"SWAN "Stocks ${a.getFullYear()}-${a.getMonth()}-${a.getDate()} T${a.getHours()}-${a.getMinutes()}-${a.getSeconds()}.csv`,r=Z(t.data);r=[n.concat(u).map((e=>e.title)),...r],G(s,r)}catch(e){}},async function(){try{let e={"pagination[limit]":-1,populate:{consortium_member:{populate:"*"},warehouse:{populate:"*"},stock_items:{populate:["purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]}}};e=H.stringify(e,{encodeValuesOnly:!0});let t=await F("stocks",e);L("Stocks",Z(t.data),n.concat(u))}catch(e){}},function(){o=this.value,a(0,o)},()=>a(1,i=!1)]}class te extends e{constructor(e){super(),t(this,e,ee,Q,a,{})}}export{te as default};
