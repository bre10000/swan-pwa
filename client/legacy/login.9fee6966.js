import{P as a,Q as r,b2 as n,_ as s,a as e,b as t,c as o,i,d as c,S as l,s as u,e as f,t as d,D as h,f as p,h as v,j as m,k as g,G as w,l as b,H as E,m as y,n as R,J as x,K as I,L as B,E as C,p as P,X as V,O as A,F as D,a5 as N,M as q,z as L,a7 as S,g as T,u as j}from"./client.1185c79e.js";import{f as H,a as _,r as k}from"./required.ced50e4d.js";import{s as G}from"./session.72400eb8.js";function O(){return(O=a(r.mark((function a(s){var e,t,o,i,c,l,u,f,d,h;return r.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=s.method,t=s.path,o=s.params,i=s.header,c=s.data,l=window.fetch,u={method:e,headers:{Accept:"*/*","Content-Type":i&&i.ContentType?i.ContentType:"application/x-www-form-urlencoded"},Cache:"no-cache"},console.log("Send options"),console.log(u),c&&("application/x-www-form-urlencoded"==u.headers["Content-Type"]||"GET"==e?u.body=new URLSearchParams(c):"application/json"==u.headers["Content-Type"]&&(u.body=JSON.stringify(c))),f=new URL("".concat(n,"/").concat(t)),o&&Object.keys(o).forEach((function(a){return f.searchParams.append(a,o[a])})),a.prev=8,a.next=11,l(f,u);case 11:if(d=a.sent,console.log({response:d}),d){a.next=15;break}throw"response undefined";case 15:return a.next=17,d.text();case 17:return h=a.sent,console.log({json:h}),a.prev=19,a.abrupt("return",JSON.parse(h));case 23:throw a.prev=23,a.t0=a.catch(19),a.t0;case 26:a.next=31;break;case 28:throw a.prev=28,a.t1=a.catch(8),a.t1;case 31:case"end":return a.stop()}}),a,null,[[8,28],[19,23]])})))).apply(this,arguments)}function M(a){return function(a){return O.apply(this,arguments)}({method:"POST",path:a.path,header:a.header,data:a.data})}function U(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(a){return!1}}();return function(){var n,s=e(a);if(r){var o=e(this).constructor;n=Reflect.construct(s,arguments,o)}else n=s.apply(this,arguments);return t(this,n)}}function W(a,r,n){var s=a.slice();return s[11]=r[n],s}function z(a){var r,n;return{c:function(){r=f("p"),n=d("Identifier is required"),this.h()},l:function(a){r=p(a,"P",{class:!0});var s=v(r);n=m(s,"Identifier is required"),s.forEach(g),this.h()},h:function(){b(r,"class","help is-danger")},m:function(a,s){y(a,r,s),R(r,n)},d:function(a){a&&g(r)}}}function J(a){var r,n;return{c:function(){r=f("p"),n=d("Password is required"),this.h()},l:function(a){r=p(a,"P",{class:!0});var s=v(r);n=m(s,"Password is required"),s.forEach(g),this.h()},h:function(){b(r,"class","help is-danger")},m:function(a,s){y(a,r,s),R(r,n)},d:function(a){a&&g(r)}}}function F(a){for(var r,n=a[0].password,s=[],e=0;e<n.length;e+=1)s[e]=K(W(a,n,e));return{c:function(){for(var a=0;a<s.length;a+=1)s[a].c();r=C()},l:function(a){for(var n=0;n<s.length;n+=1)s[n].l(a);r=C()},m:function(a,n){for(var e=0;e<s.length;e+=1)s[e].m(a,n);y(a,r,n)},p:function(a,e){if(1&e){var t;for(n=a[0].password,t=0;t<n.length;t+=1){var o=W(a,n,t);s[t]?s[t].p(o,e):(s[t]=K(o),s[t].c(),s[t].m(r.parentNode,r))}for(;t<s.length;t+=1)s[t].d(1);s.length=n.length}},d:function(a){V(s,a),a&&g(r)}}}function K(a){var r,n,s=a[11]+"";return{c:function(){r=f("p"),n=d(s),this.h()},l:function(a){r=p(a,"P",{class:!0});var e=v(r);n=m(e,s),e.forEach(g),this.h()},h:function(){b(r,"class","help is-danger")},m:function(a,s){y(a,r,s),R(r,n)},p:function(a,r){1&r&&s!==(s=a[11]+"")&&P(n,s)},d:function(a){a&&g(r)}}}function Q(a){var r,n;return{c:function(){r=f("h5"),n=d(a[0]),this.h()},l:function(s){r=p(s,"H5",{class:!0});var e=v(r);n=m(e,a[0]),e.forEach(g),this.h()},h:function(){b(r,"class","has-text-danger is-size-6")},m:function(a,s){y(a,r,s),R(r,n)},p:function(a,r){1&r&&P(n,a[0])},d:function(a){a&&g(r)}}}function X(a){var r,n,s,e,t,o,i,c,l,u,C,P,V,S,T,j,H,_,k,G,O,M,U,W,K,X,Y,Z,$,aa,ra,na,sa,ea,ta,oa,ia,ca,la,ua,fa,da,ha,pa,va,ma,ga,wa,ba,Ea=a[6]&&function(a){var r,n,s,e,t,o,i,c,l,u,C,P,V,D,N,q,L,S,T,j,H,_,k,G,O,M,U=a[3].hasError("identifier.required"),W=a[3].hasError("password.required"),K=U&&z(),X=W&&J(),Y=a[0]&&(null===(r=a[0])||void 0===r?void 0:r.password)&&F(a),Z=a[0]&&Q(a);return{c:function(){n=f("form"),s=f("div"),e=f("label"),t=d("Username or Email"),o=h(),i=f("div"),c=f("input"),l=h(),K&&K.c(),u=h(),C=f("div"),P=f("label"),V=d("Password"),D=h(),N=f("div"),q=f("input"),L=h(),X&&X.c(),S=h(),Y&&Y.c(),T=h(),Z&&Z.c(),j=h(),H=f("div"),_=f("button"),k=d("Login"),this.h()},l:function(a){n=p(a,"FORM",{class:!0,style:!0});var r=v(n);s=p(r,"DIV",{class:!0});var f=v(s);e=p(f,"LABEL",{for:!0,class:!0});var d=v(e);t=m(d,"Username or Email"),d.forEach(g),o=w(f),i=p(f,"DIV",{class:!0});var h=v(i);c=p(h,"INPUT",{class:!0,type:!0,name:!0,id:!0,placeholder:!0}),h.forEach(g),l=w(f),K&&K.l(f),f.forEach(g),u=w(r),C=p(r,"DIV",{class:!0});var b=v(C);P=p(b,"LABEL",{for:!0,class:!0});var E=v(P);V=m(E,"Password"),E.forEach(g),D=w(b),N=p(b,"DIV",{class:!0});var y=v(N);q=p(y,"INPUT",{class:!0,type:!0,name:!0,id:!0,placeholder:!0}),y.forEach(g),L=w(b),X&&X.l(b),S=w(b),Y&&Y.l(b),b.forEach(g),T=w(r),Z&&Z.l(r),j=w(r),H=p(r,"DIV",{class:!0});var R=v(H);_=p(R,"BUTTON",{class:!0});var x=v(_);k=m(x,"Login"),x.forEach(g),R.forEach(g),r.forEach(g),this.h()},h:function(){b(e,"for",""),b(e,"class","gray"),b(c,"class","input"),b(c,"type","text"),b(c,"name","identifier"),b(c,"id","identifier"),c.required=!0,b(c,"placeholder","example@gmail.com"),b(i,"class","control"),b(s,"class","field"),b(P,"for",""),b(P,"class","gray"),b(q,"class","input"),b(q,"type","password"),b(q,"name","password"),b(q,"id","password"),q.required=!0,b(q,"placeholder","******************"),b(N,"class","control"),b(C,"class","field py-4"),_.disabled=G=!a[3].valid,b(_,"class","button is-light px-5 py-2 has-text-weight-bold"),b(H,"class","container-fluid has-text-centered py-2"),b(n,"class","has-text-left pt-4"),E(n,"max-width","250px"),E(n,"margin","0 auto")},m:function(r,f){y(r,n,f),R(n,s),R(s,e),R(e,t),R(s,o),R(s,i),R(i,c),x(c,a[2].value),R(s,l),K&&K.m(s,null),R(n,u),R(n,C),R(C,P),R(P,V),R(C,D),R(C,N),R(N,q),x(q,a[1].value),R(C,L),X&&X.m(C,null),R(C,S),Y&&Y.m(C,null),R(n,T),Z&&Z.m(n,null),R(n,j),R(n,H),R(H,_),R(_,k),O||(M=[I(c,"input",a[8]),I(q,"input",a[9]),I(n,"submit",B(a[7]))],O=!0)},p:function(a,r){var e;4&r&&c.value!==a[2].value&&x(c,a[2].value),8&r&&(U=a[3].hasError("identifier.required")),U?K||((K=z()).c(),K.m(s,null)):K&&(K.d(1),K=null),2&r&&q.value!==a[1].value&&x(q,a[1].value),8&r&&(W=a[3].hasError("password.required")),W?X||((X=J()).c(),X.m(C,S)):X&&(X.d(1),X=null),a[0]&&null!==(e=a[0])&&void 0!==e&&e.password?Y?Y.p(a,r):((Y=F(a)).c(),Y.m(C,null)):Y&&(Y.d(1),Y=null),a[0]?Z?Z.p(a,r):((Z=Q(a)).c(),Z.m(n,j)):Z&&(Z.d(1),Z=null),8&r&&G!==(G=!a[3].valid)&&(_.disabled=G)},d:function(a){a&&g(n),K&&K.d(),X&&X.d(),Y&&Y.d(),Z&&Z.d(),O=!1,A(M)}}}(a);return{c:function(){r=h(),n=f("br"),s=f("br"),e=h(),t=f("main"),o=f("br"),i=f("br"),c=h(),l=f("div"),u=f("div"),C=f("div"),P=f("br"),V=f("br"),S=h(),T=f("h1"),j=d("SWAN"),H=h(),_=f("p"),k=d("Humanitarian Consortium"),G=h(),O=f("br"),M=f("br"),U=h(),W=f("div"),K=f("div"),X=f("img"),Y=h(),Z=f("div"),$=f("img"),aa=h(),ra=f("div"),na=f("img"),sa=h(),ea=f("div"),ta=f("img"),oa=h(),ia=f("div"),ca=f("br"),la=f("br"),ua=h(),fa=f("img"),da=h(),Ea&&Ea.c(),ha=h(),pa=f("br"),va=f("br"),ma=f("br"),ga=f("br"),wa=f("br"),ba=f("br"),this.h()},l:function(a){D('[data-svelte="svelte-10qpq3o"]',document.head).forEach(g),r=w(a),n=p(a,"BR",{}),s=p(a,"BR",{}),e=w(a),t=p(a,"MAIN",{class:!0});var f=v(t);o=p(f,"BR",{}),i=p(f,"BR",{}),c=w(f),l=p(f,"DIV",{class:!0});var d=v(l);u=p(d,"DIV",{class:!0});var h=v(u);C=p(h,"DIV",{class:!0});var b=v(C);P=p(b,"BR",{}),V=p(b,"BR",{}),S=w(b),T=p(b,"H1",{class:!0,style:!0});var E=v(T);j=m(E,"SWAN"),E.forEach(g),H=w(b),_=p(b,"P",{class:!0});var y=v(_);k=m(y,"Humanitarian Consortium"),y.forEach(g),G=w(b),O=p(b,"BR",{}),M=p(b,"BR",{}),U=w(b),W=p(b,"DIV",{class:!0});var R=v(W);K=p(R,"DIV",{class:!0});var x=v(K);X=p(x,"IMG",{src:!0,alt:!0}),x.forEach(g),Y=w(R),Z=p(R,"DIV",{class:!0});var I=v(Z);$=p(I,"IMG",{src:!0,alt:!0}),I.forEach(g),aa=w(R),ra=p(R,"DIV",{class:!0});var B=v(ra);na=p(B,"IMG",{src:!0,alt:!0}),B.forEach(g),sa=w(R),ea=p(R,"DIV",{class:!0});var A=v(ea);ta=p(A,"IMG",{src:!0,alt:!0}),A.forEach(g),R.forEach(g),b.forEach(g),oa=w(h),ia=p(h,"DIV",{class:!0});var N=v(ia);ca=p(N,"BR",{}),la=p(N,"BR",{}),ua=w(N),fa=p(N,"IMG",{src:!0,alt:!0,width:!0}),da=w(N),Ea&&Ea.l(N),N.forEach(g),h.forEach(g),d.forEach(g),f.forEach(g),ha=w(a),pa=p(a,"BR",{}),va=p(a,"BR",{}),ma=p(a,"BR",{}),ga=p(a,"BR",{}),wa=p(a,"BR",{}),ba=p(a,"BR",{}),this.h()},h:function(){document.title="Login",b(T,"class","is-size-1"),E(T,"line-height","1"),b(_,"class","is-size-7 gray"),N(X.src,"./images/login/Save the ChildrenSTC_Logo_Horiz_ColPos_RGB-01.jpg")||b(X,"src","./images/login/Save the ChildrenSTC_Logo_Horiz_ColPos_RGB-01.jpg"),b(X,"alt",""),b(K,"class","column p-5 is-half"),N($.src,"./images/login/World VisionWorld Vision.png")||b($,"src","./images/login/World VisionWorld Vision.png"),b($,"alt",""),b(Z,"class","column p-5 is-half"),N(na.src,"./images/login/Norwegian Refugee CouncilNRC.png")||b(na,"src","./images/login/Norwegian Refugee CouncilNRC.png"),b(na,"alt",""),b(ra,"class","column p-5 is-half"),N(ta.src,"./images/login/Action Against HungerAAH.png")||b(ta,"src","./images/login/Action Against HungerAAH.png"),b(ta,"alt",""),b(ea,"class","column p-5 is-half"),b(W,"class","columns px-6 is-align-items-center is-multiline"),b(C,"class","column has-text-centered has-border-right-gray is-hidden-mobile"),N(fa.src,"./images/logo/swan_logo.svg")||b(fa,"src","./images/logo/swan_logo.svg"),b(fa,"alt","SWAN Logo"),b(fa,"width","250"),b(ia,"class","column is-6 has-text-centered p-6 signin-form"),b(u,"class","columns is-justify-content-center"),b(l,"class","card login-card is-rounded svelte-152vqfe"),b(t,"class","container px-5 ")},m:function(a,f){y(a,r,f),y(a,n,f),y(a,s,f),y(a,e,f),y(a,t,f),R(t,o),R(t,i),R(t,c),R(t,l),R(l,u),R(u,C),R(C,P),R(C,V),R(C,S),R(C,T),R(T,j),R(C,H),R(C,_),R(_,k),R(C,G),R(C,O),R(C,M),R(C,U),R(C,W),R(W,K),R(K,X),R(W,Y),R(W,Z),R(Z,$),R(W,aa),R(W,ra),R(ra,na),R(W,sa),R(W,ea),R(ea,ta),R(u,oa),R(u,ia),R(ia,ca),R(ia,la),R(ia,ua),R(ia,fa),R(ia,da),Ea&&Ea.m(ia,null),y(a,ha,f),y(a,pa,f),y(a,va,f),y(a,ma,f),y(a,ga,f),y(a,wa,f),y(a,ba,f)},p:function(a,r){var n=q(r,1)[0];a[6]&&Ea.p(a,n)},i:L,o:L,d:function(a){a&&g(r),a&&g(n),a&&g(s),a&&g(e),a&&g(t),Ea&&Ea.d(),a&&g(ha),a&&g(pa),a&&g(va),a&&g(ma),a&&g(ga),a&&g(wa),a&&g(ba)}}}function Y(n,s,e){var t,o,i,c,l=H("identifier","",[k()]);S(n,l,(function(a){return e(2,o=a)}));var u=H("password","",[k()]);S(n,u,(function(a){return e(1,t=a)}));var f=_(l,u);function d(){return(d=a(r.mark((function a(){var n,s,i;return r.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,M({path:"auth/local",header:{ContentType:"application/json"},data:{identifier:o.value,password:t.value}});case 3:if(!(s=a.sent)||400!=(null===(n=s.error)||void 0===n?void 0:n.status)){a.next=8;break}e(0,c=null===(i=s.error)||void 0===i?void 0:i.message),a.next=14;break;case 8:if(!s.jwt){a.next=14;break}return a.next=11,G.setSession(s.jwt);case 11:return a.next=13,j.fetch();case 13:T("dashboard");case 14:a.next=20;break;case 16:a.prev=16,a.t0=a.catch(0),console.error("LOGIN ERROR",a.t0),e(0,c="An error has occured while trying to connect to the server. Please try again.");case 20:case"end":return a.stop()}}),a,null,[[0,16]])})))).apply(this,arguments)}return S(n,f,(function(a){return e(3,i=a)})),[c,t,o,i,l,u,f,function(){return d.apply(this,arguments)},function(){o.value=this.value,l.set(o)},function(){t.value=this.value,u.set(t)}]}var Z=function(a){s(n,l);var r=U(n);function n(a){var s;return o(this,n),s=r.call(this),i(c(s),a,Y,X,u,{}),s}return n}();export{Z as default};
