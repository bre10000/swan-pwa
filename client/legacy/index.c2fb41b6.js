import{_ as t,a,b as e,c as n,i as r,d as s,S as o,s as c,e as i,t as l,f as u,h as f,j as p,k as d,l as h,m as v,n as m,p as g,I as y,r as b,v as E,D as w,w as $,F as x,G as A,x as D,H as V,J as R,y as k,K as P,L as B,M as I,B as T,N as L,A as C,C as S,O as _,u as F,g as N,o as j,P as O,Q as H,R as M,T as U,ad as G,z as W}from"./client.97995fc4.js";import{D as Y}from"./DataTable.b64d0bdf.js";import{l as q}from"./index.87ffe8ed.js";import{e as z}from"./csvGenerator.e211989c.js";import"./jspdf.plugin.autotable.96a011cd.js";import{e as J}from"./exportPDFAlternate.40ea0c2a.js";import"./SelectedColumns.93c40138.js";import"./SelectedColumns.61150ba7.js";import"./DataTable.addde9e1.js";function K(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,s=a(t);if(n){var o=a(this).constructor;r=Reflect.construct(s,arguments,o)}else r=s.apply(this,arguments);return e(this,r)}}function Q(t){var a,e,n=t[2].total+"";return{c:function(){a=i("span"),e=l(n),this.h()},l:function(t){a=u(t,"SPAN",{class:!0});var r=f(a);e=p(r,n),r.forEach(d),this.h()},h:function(){h(a,"class","gray has-text-weight-light ml-2")},m:function(t,n){v(t,a,n),m(a,e)},p:function(t,a){4&a&&n!==(n=t[2].total+"")&&g(e,n)},d:function(t){t&&d(a)}}}function X(t){var a,e,n,r,s,o,c,g,E,x,V,R,P,B,I,L;return c=new y({props:{data:b,scale:"3"}}),{c:function(){a=i("div"),e=i("br"),n=i("br"),r=i("br"),s=i("br"),o=w(),$(c.$$.fragment),g=w(),E=i("p"),x=l("Uh oh! nothing found on database."),V=w(),R=i("br"),P=i("br"),B=i("br"),I=i("br"),this.h()},l:function(t){a=u(t,"DIV",{class:!0});var i=f(a);e=u(i,"BR",{}),n=u(i,"BR",{}),r=u(i,"BR",{}),s=u(i,"BR",{}),o=A(i),D(c.$$.fragment,i),g=A(i),E=u(i,"P",{class:!0});var l=f(E);x=p(l,"Uh oh! nothing found on database."),l.forEach(d),V=A(i),R=u(i,"BR",{}),P=u(i,"BR",{}),B=u(i,"BR",{}),I=u(i,"BR",{}),i.forEach(d),this.h()},h:function(){h(E,"class","gray"),h(a,"class","has-text-centered")},m:function(t,i){v(t,a,i),m(a,e),m(a,n),m(a,r),m(a,s),m(a,o),k(c,a,null),m(a,g),m(a,E),m(E,x),m(a,V),m(a,R),m(a,P),m(a,B),m(a,I),L=!0},p:W,i:function(t){L||(C(c.$$.fragment,t),L=!0)},o:function(t){T(c.$$.fragment,t),L=!1},d:function(t){t&&d(a),S(c)}}}function Z(t){var a,e;return(a=new Y({props:{pagination:t[2],columns:t[3],rows:t[1],options:t[4]}})).$on("clickCol",t[7]),a.$on("changePage",t[6]),a.$on("clickRow",t[8]),{c:function(){$(a.$$.fragment)},l:function(t){D(a.$$.fragment,t)},m:function(t,n){k(a,t,n),e=!0},p:function(t,e){var n={};4&e&&(n.pagination=t[2]),2&e&&(n.rows=t[1]),a.$set(n)},i:function(t){e||(C(a.$$.fragment,t),e=!0)},o:function(t){T(a.$$.fragment,t),e=!1},d:function(t){S(a,t)}}}function tt(t){var a,e,n,r,s,o,c,g,F,N,j,O,H,M,G,W,Y,q,z,J,K,tt,at,et,nt,rt,st,ot,ct,it,lt,ut,ft,pt,dt,ht,vt,mt,gt,yt,bt,Et,wt,$t,xt,At,Dt,Vt,Rt,kt,Pt,Bt,It,Tt,Lt,Ct,St,_t,Ft,Nt,jt,Ot,Ht,Mt=t[2]&&Q(t);J=new y({props:{data:b}}),pt=new y({props:{data:E}});var Ut=[Z,X],Gt=[];function Wt(t,a){var e;return(null===(e=t[1])||void 0===e?void 0:e.length)>0?0:1}return It=Wt(t),Tt=Gt[It]=Ut[It](t),{c:function(){a=w(),e=i("br"),n=i("br"),r=w(),s=i("div"),o=i("div"),c=i("div"),g=i("h3"),F=l("Activity Logs\r\n                "),Mt&&Mt.c(),N=w(),j=i("div"),O=w(),H=i("div"),M=i("div"),G=i("div"),W=i("div"),Y=i("input"),q=w(),z=i("span"),$(J.$$.fragment),K=w(),tt=i("div"),at=i("button"),et=l("Search"),nt=w(),rt=i("div"),st=i("div"),ot=i("div"),ct=i("button"),it=i("span"),lt=l("Export To Excel or PDF"),ut=w(),ft=i("span"),$(pt.$$.fragment),dt=w(),ht=i("div"),vt=i("div"),mt=i("a"),gt=l("Export Current Page to Excel"),yt=w(),bt=i("a"),Et=l("Export Current Page to PDF"),wt=w(),$t=i("hr"),xt=w(),At=i("a"),Dt=l("Export All to Excel"),Vt=w(),Rt=i("a"),kt=l("Export All to PDF"),Pt=w(),Bt=i("div"),Tt.c(),Lt=w(),Ct=i("br"),St=i("br"),_t=i("br"),Ft=i("br"),Nt=i("br"),this.h()},l:function(t){x('[data-svelte="svelte-ca7659"]',document.head).forEach(d),a=A(t),e=u(t,"BR",{}),n=u(t,"BR",{}),r=A(t),s=u(t,"DIV",{class:!0});var i=f(s);o=u(i,"DIV",{class:!0});var l=f(o);c=u(l,"DIV",{class:!0});var h=f(c);g=u(h,"H3",{});var v=f(g);F=p(v,"Activity Logs\r\n                "),Mt&&Mt.l(v),v.forEach(d),h.forEach(d),N=A(l),j=u(l,"DIV",{class:!0}),f(j).forEach(d),l.forEach(d),O=A(i),H=u(i,"DIV",{class:!0});var m=f(H);M=u(m,"DIV",{class:!0});var y=f(M);G=u(y,"DIV",{class:!0,style:!0});var b=f(G);W=u(b,"DIV",{class:!0});var E=f(W);Y=u(E,"INPUT",{class:!0,type:!0,placeholder:!0}),q=A(E),z=u(E,"SPAN",{class:!0});var w=f(z);D(J.$$.fragment,w),w.forEach(d),E.forEach(d),K=A(b),tt=u(b,"DIV",{class:!0});var $=f(tt);at=u($,"BUTTON",{class:!0});var V=f(at);et=p(V,"Search"),V.forEach(d),$.forEach(d),b.forEach(d),y.forEach(d),nt=A(m),rt=u(m,"DIV",{class:!0});var R=f(rt);st=u(R,"DIV",{class:!0});var k=f(st);ot=u(k,"DIV",{class:!0});var P=f(ot);ct=u(P,"BUTTON",{class:!0,"aria-haspopup":!0,"aria-controls":!0});var B=f(ct);it=u(B,"SPAN",{});var I=f(it);lt=p(I,"Export To Excel or PDF"),I.forEach(d),ut=A(B),ft=u(B,"SPAN",{class:!0});var T=f(ft);D(pt.$$.fragment,T),T.forEach(d),B.forEach(d),P.forEach(d),dt=A(k),ht=u(k,"DIV",{class:!0,id:!0,role:!0});var L=f(ht);vt=u(L,"DIV",{class:!0});var C=f(vt);mt=u(C,"A",{href:!0,class:!0});var S=f(mt);gt=p(S,"Export Current Page to Excel"),S.forEach(d),yt=A(C),bt=u(C,"A",{href:!0,class:!0});var _=f(bt);Et=p(_,"Export Current Page to PDF"),_.forEach(d),wt=A(C),$t=u(C,"HR",{class:!0}),xt=A(C),At=u(C,"A",{href:!0,class:!0});var U=f(At);Dt=p(U,"Export All to Excel"),U.forEach(d),Vt=A(C),Rt=u(C,"A",{href:!0,class:!0});var Q=f(Rt);kt=p(Q,"Export All to PDF"),Q.forEach(d),C.forEach(d),L.forEach(d),k.forEach(d),R.forEach(d),m.forEach(d),Pt=A(i),Bt=u(i,"DIV",{class:!0});var X=f(Bt);Tt.l(X),X.forEach(d),Lt=A(i),Ct=u(i,"BR",{}),St=u(i,"BR",{}),_t=u(i,"BR",{}),Ft=u(i,"BR",{}),Nt=u(i,"BR",{}),i.forEach(d),this.h()},h:function(){document.title="Activity Logs",h(c,"class","column"),h(j,"class","column has-text-right"),h(o,"class","columns"),h(Y,"class","input is-dark"),h(Y,"type","search"),h(Y,"placeholder","search"),h(z,"class","icon is-small is-left"),h(W,"class","control has-icons-left"),h(at,"class","button is-dark has-text-weight-bold"),h(tt,"class","control"),h(G,"class","field has-addons"),V(G,"width","500px"),h(M,"class","column"),h(ft,"class","icon is-small"),h(ct,"class","button"),h(ct,"aria-haspopup","true"),h(ct,"aria-controls","dropdown-menu"),h(ot,"class","dropdown-trigger"),h(mt,"href","#"),h(mt,"class","dropdown-item"),h(bt,"href","#"),h(bt,"class","dropdown-item"),h($t,"class","dropdown-divider"),h(At,"href","#"),h(At,"class","dropdown-item"),h(Rt,"href","#"),h(Rt,"class","dropdown-item"),h(vt,"class","dropdown-content has-text-left"),h(ht,"class","dropdown-menu"),h(ht,"id","dropdown-menu"),h(ht,"role","menu"),h(st,"class","dropdown is-hoverable"),h(rt,"class","column has-text-right"),h(H,"class","columns"),h(Bt,"class","card"),h(s,"class","container px-6")},m:function(i,l){v(i,a,l),v(i,e,l),v(i,n,l),v(i,r,l),v(i,s,l),m(s,o),m(o,c),m(c,g),m(g,F),Mt&&Mt.m(g,null),m(o,N),m(o,j),m(s,O),m(s,H),m(H,M),m(M,G),m(G,W),m(W,Y),R(Y,t[0]),m(W,q),m(W,z),k(J,z,null),m(G,K),m(G,tt),m(tt,at),m(at,et),m(H,nt),m(H,rt),m(rt,st),m(st,ot),m(ot,ct),m(ct,it),m(it,lt),m(ct,ut),m(ct,ft),k(pt,ft,null),m(st,dt),m(st,ht),m(ht,vt),m(vt,mt),m(mt,gt),m(vt,yt),m(vt,bt),m(bt,Et),m(vt,wt),m(vt,$t),m(vt,xt),m(vt,At),m(At,Dt),m(vt,Vt),m(vt,Rt),m(Rt,kt),m(s,Pt),m(s,Bt),Gt[It].m(Bt,null),m(s,Lt),m(s,Ct),m(s,St),m(s,_t),m(s,Ft),m(s,Nt),jt=!0,Ot||(Ht=[P(Y,"input",t[13]),P(at,"click",t[5]),P(mt,"click",B(t[9])),P(bt,"click",B(t[10])),P(At,"click",B(t[11])),P(Rt,"click",B(t[12]))],Ot=!0)},p:function(t,a){var e=I(a,1)[0];t[2]?Mt?Mt.p(t,e):((Mt=Q(t)).c(),Mt.m(g,null)):Mt&&(Mt.d(1),Mt=null),1&e&&R(Y,t[0]);var n=It;(It=Wt(t))===n?Gt[It].p(t,e):(U(),T(Gt[n],1,1,(function(){Gt[n]=null})),L(),(Tt=Gt[It])?Tt.p(t,e):(Tt=Gt[It]=Ut[It](t)).c(),C(Tt,1),Tt.m(Bt,null))},i:function(t){jt||(C(J.$$.fragment,t),C(pt.$$.fragment,t),C(Tt),jt=!0)},o:function(t){T(J.$$.fragment,t),T(pt.$$.fragment,t),T(Tt),jt=!1},d:function(t){t&&d(a),t&&d(e),t&&d(n),t&&d(r),t&&d(s),Mt&&Mt.d(),S(J),S(pt),Gt[It].d(),Ot=!1,_(Ht)}}}function at(t){var a=[];return t.forEach((function(t){var e,n;a.push([t.id,null===(e=t.attributes.users_permissions_user.data)||void 0===e?void 0:e.attributes.name,null===(n=t.attributes.users_permissions_user.data)||void 0===n?void 0:n.attributes.email,t.attributes.type,t.attributes.action,t.attributes.date])})),a}function et(t,a,e){var n=F.subscribe((function(t){!t.loggedIn&&t.fetched?N("/login"):t.data&&l()}));j(n);var r,s="",o="",c=[],i=[{key:"id",title:"ID",sortable:!0,filterValue:function(t){return Math.floor(t.id/10)},interval:10,filterType:"numeric",headerClass:"has-text-left",selected:!0},{key:"userName",title:"User's Name",sortable:!0,filterValue:function(t){return t.first_name.charAt(0).toLowerCase()},filterType:"string",selected:!0},{key:"email",title:"Email",sortable:!0,filterValue:function(t){return t.first_name.charAt(0).toLowerCase()},filterType:"string",selected:!0},{key:"type",title:"Type",sortable:!0,filterValue:function(t){return t.first_name.charAt(0).toLowerCase()},filterType:"string",selected:!0},{key:"action",title:"Action",sortable:!0,filterValue:function(t){return t.first_name.charAt(0).toLowerCase()},filterType:"string",selected:!0},{key:"createdAt",title:"Date",sortable:!0,filterValue:function(t){return t.last_name.charAt(0).toLowerCase()},filterType:"string",selected:!0}];function l(t,a,e){return u.apply(this,arguments)}function u(){return(u=O(H.mark((function t(a,n,s){var o,i,l;return H.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={filters:a||{},sort:n||"id:desc",populate:"*","pagination[page]":s||1},i=q.stringify(i,{encodeValuesOnly:!0}),t.next=5,M("activity-logs",i);case 5:l=t.sent,console.log("Get Activity Logs Request - ",l),e(1,c=l.data),e(2,r=null===(o=l.meta)||void 0===o?void 0:o.pagination),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.warn("Error Getting Activity Logs - ",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function f(){return{$or:[{action:{$containsi:s}},{type:{$containsi:s}},{date:{$containsi:s}},{users_permissions_user:{name:{$containsi:s}}},{users_permissions_user:{email:{$containsi:s}}}]}}function p(){return(p=O(H.mark((function t(){var a,e,n,r,s;return H.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={populate:"*","pagination[limit]":-1},a=q.stringify(a,{encodeValuesOnly:!0}),t.next=5,M("activity-logs",a);case 5:e=t.sent,n=new Date,r='"SWAN "'.concat("Activity Logs"," ",n.getFullYear(),"-").concat(n.getMonth(),"-").concat(n.getDate()," T").concat(n.getHours(),"-").concat(n.getMinutes(),"-").concat(n.getSeconds(),".csv"),s=at(e.data),s=[i.map((function(t){return t.title}))].concat(G(s)),z(r,s),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function d(){return(d=O(H.mark((function t(){var a,e;return H.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={populate:"*","pagination[limit]":-1},a=q.stringify(a,{encodeValuesOnly:!0}),t.next=5,M("activity-logs",a);case 5:e=t.sent,J("Activity Logs",at(e.data),i),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return[s,c,r,i,{title:"Activity Logs Table",showFilterHeader:!1,showSelect:!1,showDetails:!1,showActions:!1,showFooter:!1},function(){l(f(),o)},function(t){l(f(),o,t.detail.newPage)},function(t){o=t.detail.key,l(f(),o,t.detail.newPage)},function(t){N("activity-logs/detail/"+t.detail.row.id)},function(){var t=new Date,a='"SWAN "'.concat("Activity Logs"," ",t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate()," T").concat(t.getHours(),"-").concat(t.getMinutes(),"-").concat(t.getSeconds(),".csv"),e=at(c);e=[i.map((function(t){return t.title}))].concat(G(e)),z(a,e)},function(){J("Activity Logs",at(c),i)},function(){return p.apply(this,arguments)},function(){return d.apply(this,arguments)},function(){s=this.value,e(0,s)}]}var nt=function(a){t(i,o);var e=K(i);function i(t){var a;return n(this,i),a=e.call(this),r(s(a),t,et,tt,c,{}),a}return i}();export{nt as default};
