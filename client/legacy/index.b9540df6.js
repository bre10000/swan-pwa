import{_ as t,a as e,b as a,c as r,i as s,d as n,S as o,s as i,e as c,t as l,f as u,h as d,j as f,k as m,l as p,m as h,n as b,p as _,I as v,q as y,r as g,v as w,w as k,x as $,y as E,z as x,A as D,B as P,C as R,D as A,E as V,F as B,G as I,H as N,J as S,K as T,L as W,M as C,N as F,O as j,u as M,g as O,o as U,P as H,Q as q,R as L,T as G,U as Q,V as Y,ad as z}from"./client.1b06dd5c.js";import{l as J}from"./index.448aaebd.js";import{D as K}from"./DeleteConfirmation.cc0cbee7.js";import{D as X}from"./DataTableDetails.d1c24e5d.js";import{e as Z}from"./csvGenerator.d45bcb57.js";import{e as tt}from"./exportPDFAlternate.4f072d5c.js";import{c as et}from"./log.76d3894b.js";import"./SelectedColumns.3087c8ff.js";import"./SelectedColumns.61150ba7.js";import"./jspdf.plugin.autotable.051a3bc1.js";function at(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,n=e(t);if(r){var o=e(this).constructor;s=Reflect.construct(n,arguments,o)}else s=n.apply(this,arguments);return a(this,s)}}function rt(t){var e,a,r=t[3].total+"";return{c:function(){e=c("span"),a=l(r),this.h()},l:function(t){e=u(t,"SPAN",{class:!0});var s=d(e);a=f(s,r),s.forEach(m),this.h()},h:function(){p(e,"class","gray has-text-weight-light ml-2")},m:function(t,r){h(t,e,r),b(e,a)},p:function(t,e){8&e&&r!==(r=t[3].total+"")&&_(a,r)},d:function(t){t&&m(e)}}}function st(t){var e,a,r,s,n,o,i,_,y,w,V,B,N,S,T,W;return i=new v({props:{data:g,scale:"3"}}),{c:function(){e=c("div"),a=c("br"),r=c("br"),s=c("br"),n=c("br"),o=A(),k(i.$$.fragment),_=A(),y=c("p"),w=l("Uh oh! nothing found on database."),V=A(),B=c("br"),N=c("br"),S=c("br"),T=c("br"),this.h()},l:function(t){e=u(t,"DIV",{class:!0});var c=d(e);a=u(c,"BR",{}),r=u(c,"BR",{}),s=u(c,"BR",{}),n=u(c,"BR",{}),o=I(c),$(i.$$.fragment,c),_=I(c),y=u(c,"P",{class:!0});var l=d(y);w=f(l,"Uh oh! nothing found on database."),l.forEach(m),V=I(c),B=u(c,"BR",{}),N=u(c,"BR",{}),S=u(c,"BR",{}),T=u(c,"BR",{}),c.forEach(m),this.h()},h:function(){p(y,"class","gray"),p(e,"class","has-text-centered")},m:function(t,c){h(t,e,c),b(e,a),b(e,r),b(e,s),b(e,n),b(e,o),E(i,e,null),b(e,_),b(e,y),b(y,w),b(e,V),b(e,B),b(e,N),b(e,S),b(e,T),W=!0},p:x,i:function(t){W||(D(i.$$.fragment,t),W=!0)},o:function(t){P(i.$$.fragment,t),W=!1},d:function(t){t&&m(e),R(i)}}}function nt(t){var e,a;return(e=new X({props:{pagination:t[3],columns:t[4],columnsDetails:t[5],detailVariable:ct,rows:t[2],options:t[6]}})).$on("clickCol",t[9]),e.$on("changePage",t[8]),e.$on("deleteRow",t[12]),e.$on("editRow",t[10]),e.$on("clickRow",t[10]),e.$on("printRow",t[11]),{c:function(){k(e.$$.fragment)},l:function(t){$(e.$$.fragment,t)},m:function(t,r){E(e,t,r),a=!0},p:function(t,a){var r={};8&a&&(r.pagination=t[3]),4&a&&(r.rows=t[2]),e.$set(r)},i:function(t){a||(D(e.$$.fragment,t),a=!0)},o:function(t){P(e.$$.fragment,t),a=!1},d:function(t){R(e,t)}}}function ot(t){var e,a;return(e=new K({})).$on("confirm",t[13]),e.$on("dismiss",t[19]),{c:function(){k(e.$$.fragment)},l:function(t){$(e.$$.fragment,t)},m:function(t,r){E(e,t,r),a=!0},p:x,i:function(t){a||(D(e.$$.fragment,t),a=!0)},o:function(t){P(e.$$.fragment,t),a=!1},d:function(t){R(e,t)}}}function it(t){var e,a,r,s,n,o,i,_,x,M,O,U,H,q,L,Q,Y,z,J,K,X,Z,tt,et,at,it,ct,lt,ut,dt,ft,mt,pt,ht,bt,_t,vt,yt,gt,wt,kt,$t,Et,xt,Dt,Pt,Rt,At,Vt,Bt,It,Nt,St,Tt,Wt,Ct,Ft,jt,Mt,Ot,Ut,Ht,qt,Lt,Gt,Qt,Yt,zt,Jt,Kt,Xt,Zt=t[3]&&rt(t);q=new v({props:{data:y}}),it=new v({props:{data:g}}),wt=new v({props:{data:w}});var te=[nt,st],ee=[];function ae(t,e){var a;return(null===(a=t[2])||void 0===a?void 0:a.length)>0?0:1}Mt=ae(t),Ot=ee[Mt]=te[Mt](t);var re=t[1]&&ot(t);return{c:function(){e=A(),a=c("br"),r=c("br"),s=A(),n=c("div"),o=c("div"),i=c("div"),_=c("h3"),x=l("Waybills\r\n                "),Zt&&Zt.c(),M=A(),O=c("div"),U=c("a"),H=c("span"),k(q.$$.fragment),L=A(),Q=c("span"),Y=l("Add a Waybill"),z=A(),J=c("div"),K=c("div"),X=c("div"),Z=c("div"),tt=c("input"),et=A(),at=c("span"),k(it.$$.fragment),ct=A(),lt=c("div"),ut=c("button"),dt=l("Search"),ft=A(),mt=c("div"),pt=c("div"),ht=c("div"),bt=c("button"),_t=c("span"),vt=l("Export To Excel or PDF"),yt=A(),gt=c("span"),k(wt.$$.fragment),kt=A(),$t=c("div"),Et=c("div"),xt=c("a"),Dt=l("Export Current Page to Excel"),Pt=A(),Rt=c("a"),At=l("Export Current Page to PDF"),Vt=A(),Bt=c("hr"),It=A(),Nt=c("a"),St=l("Export All to Excel"),Tt=A(),Wt=c("a"),Ct=l("Export All to PDF"),Ft=A(),jt=c("div"),Ot.c(),Ut=A(),Ht=c("br"),qt=c("br"),Lt=c("br"),Gt=c("br"),Qt=c("br"),Yt=A(),re&&re.c(),zt=V(),this.h()},l:function(t){B('[data-svelte="svelte-ar7m8s"]',document.head).forEach(m),e=I(t),a=u(t,"BR",{}),r=u(t,"BR",{}),s=I(t),n=u(t,"DIV",{class:!0});var c=d(n);o=u(c,"DIV",{class:!0});var l=d(o);i=u(l,"DIV",{class:!0});var p=d(i);_=u(p,"H3",{});var h=d(_);x=f(h,"Waybills\r\n                "),Zt&&Zt.l(h),h.forEach(m),p.forEach(m),M=I(l),O=u(l,"DIV",{class:!0});var b=d(O);U=u(b,"A",{href:!0,class:!0});var v=d(U);H=u(v,"SPAN",{class:!0});var y=d(H);$(q.$$.fragment,y),y.forEach(m),L=I(v),Q=u(v,"SPAN",{class:!0});var g=d(Q);Y=f(g,"Add a Waybill"),g.forEach(m),v.forEach(m),b.forEach(m),l.forEach(m),z=I(c),J=u(c,"DIV",{class:!0});var w=d(J);K=u(w,"DIV",{class:!0});var k=d(K);X=u(k,"DIV",{class:!0,style:!0});var E=d(X);Z=u(E,"DIV",{class:!0});var D=d(Z);tt=u(D,"INPUT",{class:!0,type:!0,placeholder:!0}),et=I(D),at=u(D,"SPAN",{class:!0});var P=d(at);$(it.$$.fragment,P),P.forEach(m),D.forEach(m),ct=I(E),lt=u(E,"DIV",{class:!0});var R=d(lt);ut=u(R,"BUTTON",{class:!0});var A=d(ut);dt=f(A,"Search"),A.forEach(m),R.forEach(m),E.forEach(m),k.forEach(m),ft=I(w),mt=u(w,"DIV",{class:!0});var N=d(mt);pt=u(N,"DIV",{class:!0});var S=d(pt);ht=u(S,"DIV",{class:!0});var T=d(ht);bt=u(T,"BUTTON",{class:!0,"aria-haspopup":!0,"aria-controls":!0});var W=d(bt);_t=u(W,"SPAN",{});var C=d(_t);vt=f(C,"Export To Excel or PDF"),C.forEach(m),yt=I(W),gt=u(W,"SPAN",{class:!0});var F=d(gt);$(wt.$$.fragment,F),F.forEach(m),W.forEach(m),T.forEach(m),kt=I(S),$t=u(S,"DIV",{class:!0,id:!0,role:!0});var j=d($t);Et=u(j,"DIV",{class:!0});var G=d(Et);xt=u(G,"A",{href:!0,class:!0});var rt=d(xt);Dt=f(rt,"Export Current Page to Excel"),rt.forEach(m),Pt=I(G),Rt=u(G,"A",{href:!0,class:!0});var st=d(Rt);At=f(st,"Export Current Page to PDF"),st.forEach(m),Vt=I(G),Bt=u(G,"HR",{class:!0}),It=I(G),Nt=u(G,"A",{href:!0,class:!0});var nt=d(Nt);St=f(nt,"Export All to Excel"),nt.forEach(m),Tt=I(G),Wt=u(G,"A",{href:!0,class:!0});var ot=d(Wt);Ct=f(ot,"Export All to PDF"),ot.forEach(m),G.forEach(m),j.forEach(m),S.forEach(m),N.forEach(m),w.forEach(m),Ft=I(c),jt=u(c,"DIV",{class:!0});var Mt=d(jt);Ot.l(Mt),Mt.forEach(m),Ut=I(c),Ht=u(c,"BR",{}),qt=u(c,"BR",{}),Lt=u(c,"BR",{}),Gt=u(c,"BR",{}),Qt=u(c,"BR",{}),c.forEach(m),Yt=I(t),re&&re.l(t),zt=V(),this.h()},h:function(){document.title="Waybills",p(i,"class","column"),p(H,"class","icon"),p(Q,"class","has-text-white has-text-weight-bold"),p(U,"href","/waybills/add"),p(U,"class","button is-dark px-5"),p(O,"class","column has-text-right"),p(o,"class","columns"),p(tt,"class","input is-dark"),p(tt,"type","search"),p(tt,"placeholder","search"),p(at,"class","icon is-small is-left"),p(Z,"class","control has-icons-left"),p(ut,"class","button is-dark has-text-weight-bold"),p(lt,"class","control"),p(X,"class","field has-addons"),N(X,"width","500px"),p(K,"class","column"),p(gt,"class","icon is-small"),p(bt,"class","button"),p(bt,"aria-haspopup","true"),p(bt,"aria-controls","dropdown-menu"),p(ht,"class","dropdown-trigger"),p(xt,"href","#"),p(xt,"class","dropdown-item"),p(Rt,"href","#"),p(Rt,"class","dropdown-item"),p(Bt,"class","dropdown-divider"),p(Nt,"href","#"),p(Nt,"class","dropdown-item"),p(Wt,"href","#"),p(Wt,"class","dropdown-item"),p(Et,"class","dropdown-content has-text-left"),p($t,"class","dropdown-menu"),p($t,"id","dropdown-menu"),p($t,"role","menu"),p(pt,"class","dropdown is-hoverable"),p(mt,"class","column has-text-right"),p(J,"class","columns"),p(jt,"class","card"),p(n,"class","container px-6")},m:function(c,l){h(c,e,l),h(c,a,l),h(c,r,l),h(c,s,l),h(c,n,l),b(n,o),b(o,i),b(i,_),b(_,x),Zt&&Zt.m(_,null),b(o,M),b(o,O),b(O,U),b(U,H),E(q,H,null),b(U,L),b(U,Q),b(Q,Y),b(n,z),b(n,J),b(J,K),b(K,X),b(X,Z),b(Z,tt),S(tt,t[0]),b(Z,et),b(Z,at),E(it,at,null),b(X,ct),b(X,lt),b(lt,ut),b(ut,dt),b(J,ft),b(J,mt),b(mt,pt),b(pt,ht),b(ht,bt),b(bt,_t),b(_t,vt),b(bt,yt),b(bt,gt),E(wt,gt,null),b(pt,kt),b(pt,$t),b($t,Et),b(Et,xt),b(xt,Dt),b(Et,Pt),b(Et,Rt),b(Rt,At),b(Et,Vt),b(Et,Bt),b(Et,It),b(Et,Nt),b(Nt,St),b(Et,Tt),b(Et,Wt),b(Wt,Ct),b(n,Ft),b(n,jt),ee[Mt].m(jt,null),b(n,Ut),b(n,Ht),b(n,qt),b(n,Lt),b(n,Gt),b(n,Qt),h(c,Yt,l),re&&re.m(c,l),h(c,zt,l),Jt=!0,Kt||(Xt=[T(tt,"input",t[18]),T(ut,"click",t[7]),T(xt,"click",W(t[14])),T(Rt,"click",W(t[15])),T(Nt,"click",W(t[16])),T(Wt,"click",W(t[17]))],Kt=!0)},p:function(t,e){var a=C(e,1)[0];t[3]?Zt?Zt.p(t,a):((Zt=rt(t)).c(),Zt.m(_,null)):Zt&&(Zt.d(1),Zt=null),1&a&&S(tt,t[0]);var r=Mt;(Mt=ae(t))===r?ee[Mt].p(t,a):(G(),P(ee[r],1,1,(function(){ee[r]=null})),F(),(Ot=ee[Mt])?Ot.p(t,a):(Ot=ee[Mt]=te[Mt](t)).c(),D(Ot,1),Ot.m(jt,null)),t[1]?re?(re.p(t,a),2&a&&D(re,1)):((re=ot(t)).c(),D(re,1),re.m(zt.parentNode,zt)):re&&(G(),P(re,1,1,(function(){re=null})),F())},i:function(t){Jt||(D(q.$$.fragment,t),D(it.$$.fragment,t),D(wt.$$.fragment,t),D(Ot),D(re),Jt=!0)},o:function(t){P(q.$$.fragment,t),P(it.$$.fragment,t),P(wt.$$.fragment,t),P(Ot),P(re),Jt=!1},d:function(t){t&&m(e),t&&m(a),t&&m(r),t&&m(s),t&&m(n),Zt&&Zt.d(),R(q),R(it),R(wt),ee[Mt].d(),t&&m(Yt),re&&re.d(t),t&&m(zt),Kt=!1,j(Xt)}}}var ct="waybill_items";function lt(t){var e=[];return t.forEach((function(t){e.push([t.id,t.attributes.destination,t.attributes.consortium_member.data.attributes.name,t.attributes.category,t.attributes.date,"-","-","-","-","-","-","-","-"]),t.attributes.waybill_items.data.forEach((function(t){e.push(["-","-","-","-","-",t.id,t.attributes.stock_release_item.data.attributes.purchase_order_item.data.attributes.purchase_order.data.attributes.poNumber,t.attributes.stock_release_item.data.attributes.stock_release.data.id,t.attributes.stock_release_item.data.attributes.purchase_order_item.data.attributes.item.data.attributes.name,t.attributes.stock_release_item.data.attributes.purchase_order_item.data.attributes.unit,t.attributes.stock_release_item.data.attributes.purchase_order_item.data.attributes.pieces,t.attributes.stock_release_item.data.attributes.purchase_order_item.data.attributes.currency,t.attributes.stock_release_item.data.attributes.purchase_order_item.data.attributes.unitPrice,t.attributes.stock_release_item.data.attributes.quantity])}))})),e}function ut(t,e,a){var r=M.subscribe((function(t){!t.loggedIn&&t.fetched?O("/login"):t.data&&f()}));U(r);var s,n,o="",i="",c=!1,l=[],u=[{key:"id",title:"ID",sortable:!0,filterValue:function(t){return Math.floor(t.id/10)},interval:10,filterType:"numeric",headerClass:"has-text-left",selected:!0},{key:"destination",title:"Destination",sortable:!0,filterValue:function(t){return t.last_name.charAt(0).toLowerCase()},filterType:"string",selected:!0},{key:"consortium_member",title:"Consortium Member",sortable:!0,filterValue:function(t){return t.last_name.charAt(0).toLowerCase()},filterType:"string",selected:!0},{key:"category",title:"Category",sortable:!0,filterValue:function(t){return t.last_name.charAt(0).toLowerCase()},filterType:"string",selected:!0},{key:"date",title:"Date",sortable:!0,filterValue:function(t){return t.last_name.charAt(0).toLowerCase()},filterType:"string",selected:!0}],d=[{key:"id",title:"ID",sortable:!0,selected:!0},{key:"poNumber",title:"PO#",sortable:!0,selected:!0},{key:"srfNo",title:"SRF No.",sortable:!0,selected:!0},{key:"item",title:"ITEM",sortable:!0,selected:!0},{key:"unit",title:"Unit",sortable:!0,selected:!0},{key:"pieces",title:"Pieces",sortable:!0,selected:!0},{key:"currency",title:"Currency",sortable:!0,selected:!0},{key:"unitPrice",title:"Unit Price",sortable:!0,selected:!0},{key:"quantity",title:"Quantity",sortable:!0,selected:!0}];function f(t,e,a){return m.apply(this,arguments)}function m(){return(m=H(q.mark((function t(e,r,s){var o,i,c;return q.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i={filters:e||{},sort:r||"id:desc","pagination[page]":s||1,populate:{consortium_member:{populate:"*"},waybill_items:{populate:["stock_release_item","stock_release_item.stock_release","stock_release_item.purchase_order_item","stock_release_item.purchase_order_item.item","stock_release_item.purchase_order_item.purchase_order"]}}},i=J.stringify(i,{encodeValuesOnly:!0}),t.next=5,L("waybills",i);case 5:c=t.sent,console.log("Get Waybills Request - ",c),a(2,l=c.data),a(3,n=null===(o=c.meta)||void 0===o?void 0:o.pagination),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.warn("Error Getting Waybills - ",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function p(){f(b(),i)}function h(){return(h=H(q.mark((function t(){var e,r;return q.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(1,c=!1),t.prev=1,t.next=4,Y("waybills/"+s.id,null);case 4:r=t.sent,console.log("Delete Waybill Request  ",r),null!==(e=r.data)&&void 0!==e&&e.id&&(Q.push("Waybill Deleted Successfully!",{duration:2e4,theme:{"--toastBackground":"#48BB78","--toastBarBackground":"#2F855A"}}),et("Waybill",s,"Delete",r.data.id),p()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("Error Delete Waybill   ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}function b(){return{$or:[{date:{$containsi:o}},{destination:{$containsi:o}},{category:{$containsi:o}},{consortium_member:{name:{$containsi:o}}},{waybill_items:{stock_release_item:{stock_release:{id:{$in:[o]}}}}},{waybill_items:{stock_release_item:{purchase_order_item:{item:{name:{$containsi:o}}}}}},{waybill_items:{stock_release_item:{purchase_order_item:{item:{category:{$containsi:o}}}}}},{waybill_items:{stock_release_item:{purchase_order_item:{unit:{$containsi:o}}}}},{waybill_items:{stock_release_item:{purchase_order_item:{purchase_order:{poNumber:{$containsi:o}}}}}}]}}function _(){return(_=H(q.mark((function t(){var e,a,r,s,n;return q.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={populate:{consortium_member:{populate:"*"},waybill_items:{populate:["stock_release_item","stock_release_item.stock_release","stock_release_item.purchase_order_item","stock_release_item.purchase_order_item.item","stock_release_item.purchase_order_item.purchase_order"]}},"pagination[limit]":-1},e=J.stringify(e,{encodeValuesOnly:!0}),t.next=5,L("waybills",e);case 5:a=t.sent,r=new Date,s='"SWAN "'.concat("Waybills"," ",r.getFullYear(),"-").concat(r.getMonth(),"-").concat(r.getDate()," T").concat(r.getHours(),"-").concat(r.getMinutes(),"-").concat(r.getSeconds(),".csv"),n=lt(a.data),n=[u.concat(d).map((function(t){return t.title}))].concat(z(n)),Z(s,n),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function v(){return(v=H(q.mark((function t(){var e,a;return q.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={"pagination[limit]":-1,populate:{consortium_member:{populate:"*"},waybill_items:{populate:["stock_release_item","stock_release_item.stock_release","stock_release_item.purchase_order_item","stock_release_item.purchase_order_item.item","stock_release_item.purchase_order_item.purchase_order"]}}},e=J.stringify(e,{encodeValuesOnly:!0}),t.next=5,L("waybills",e);case 5:a=t.sent,tt("Waybills",lt(a.data),u.concat(d)),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return[o,c,l,n,u,d,{title:"Waybills Table",showFilterHeader:!1,showSelect:!1,showDetails:!1,showPrint:!0,showActions:!0,showFooter:!1},p,function(t){f(b(),i,t.detail.newPage)},function(t){i=(i=(i=t.detail.key).replace("consortium_member","consortium_member.name")).replace("warehouse","warehouse.name"),f(b(),i,t.detail.newPage)},function(t){O("waybills/edit/"+t.detail.row.id)},function(t){O("reports/single/waybill/"+t.detail.row.id)},function(t){s=t.detail.row,a(1,c=!0)},function(){return h.apply(this,arguments)},function(){var t=new Date,e='"SWAN "'.concat("Waybills"," ",t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate()," T").concat(t.getHours(),"-").concat(t.getMinutes(),"-").concat(t.getSeconds(),".csv"),a=lt(l);a=[u.concat(d).map((function(t){return t.title}))].concat(z(a)),Z(e,a)},function(){tt("Waybills",lt(l),u.concat(d))},function(){return _.apply(this,arguments)},function(){return v.apply(this,arguments)},function(){o=this.value,a(0,o)},function(){return a(1,c=!1)}]}var dt=function(e){t(c,o);var a=at(c);function c(t){var e;return r(this,c),e=a.call(this),s(n(e),t,ut,it,i,{}),e}return c}();export{dt as default};
