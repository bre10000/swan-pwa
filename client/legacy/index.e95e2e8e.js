import{_ as t,a as e,b as a,c as r,i as s,d as n,S as o,s as c,e as i,t as l,f as u,h as f,j as d,k as p,l as h,m,n as v,p as b,I as g,q as k,r as _,v as $,w,x as E,y,z as x,A as D,B as S,C as P,D as R,E as A,F as B,G as V,H as I,J as T,K as N,L as C,M as F,N as j,O as M,u as O,g as U,o as H,P as q,Q as G,R as L,T as W,U as Q,V as Y,ad as z}from"./client.1b06dd5c.js";import{l as J}from"./index.448aaebd.js";import{D as K}from"./DeleteConfirmation.cc0cbee7.js";import{D as X}from"./DataTableDetails.d1c24e5d.js";import{e as Z}from"./csvGenerator.d45bcb57.js";import{e as tt}from"./exportPDFAlternate.4f072d5c.js";import{c as et}from"./log.76d3894b.js";import"./SelectedColumns.3087c8ff.js";import"./SelectedColumns.61150ba7.js";import"./jspdf.plugin.autotable.051a3bc1.js";function at(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,n=e(t);if(r){var o=e(this).constructor;s=Reflect.construct(n,arguments,o)}else s=n.apply(this,arguments);return a(this,s)}}function rt(t){var e,a,r=t[3].total+"";return{c:function(){e=i("span"),a=l(r),this.h()},l:function(t){e=u(t,"SPAN",{class:!0});var s=f(e);a=d(s,r),s.forEach(p),this.h()},h:function(){h(e,"class","gray has-text-weight-light ml-2")},m:function(t,r){m(t,e,r),v(e,a)},p:function(t,e){8&e&&r!==(r=t[3].total+"")&&b(a,r)},d:function(t){t&&p(e)}}}function st(t){var e,a,r,s,n,o,c,b,k,$,A,B,I,T,N,C;return c=new g({props:{data:_,scale:"3"}}),{c:function(){e=i("div"),a=i("br"),r=i("br"),s=i("br"),n=i("br"),o=R(),w(c.$$.fragment),b=R(),k=i("p"),$=l("Uh oh! nothing found on database."),A=R(),B=i("br"),I=i("br"),T=i("br"),N=i("br"),this.h()},l:function(t){e=u(t,"DIV",{class:!0});var i=f(e);a=u(i,"BR",{}),r=u(i,"BR",{}),s=u(i,"BR",{}),n=u(i,"BR",{}),o=V(i),E(c.$$.fragment,i),b=V(i),k=u(i,"P",{class:!0});var l=f(k);$=d(l,"Uh oh! nothing found on database."),l.forEach(p),A=V(i),B=u(i,"BR",{}),I=u(i,"BR",{}),T=u(i,"BR",{}),N=u(i,"BR",{}),i.forEach(p),this.h()},h:function(){h(k,"class","gray"),h(e,"class","has-text-centered")},m:function(t,i){m(t,e,i),v(e,a),v(e,r),v(e,s),v(e,n),v(e,o),y(c,e,null),v(e,b),v(e,k),v(k,$),v(e,A),v(e,B),v(e,I),v(e,T),v(e,N),C=!0},p:x,i:function(t){C||(D(c.$$.fragment,t),C=!0)},o:function(t){S(c.$$.fragment,t),C=!1},d:function(t){t&&p(e),P(c)}}}function nt(t){var e,a;return(e=new X({props:{pagination:t[3],columns:t[4],columnsDetails:t[5],detailVariable:it,rows:t[2],options:t[6]}})).$on("clickCol",t[9]),e.$on("changePage",t[8]),e.$on("deleteRow",t[12]),e.$on("editRow",t[10]),e.$on("clickRow",t[10]),e.$on("printRow",t[11]),{c:function(){w(e.$$.fragment)},l:function(t){E(e.$$.fragment,t)},m:function(t,r){y(e,t,r),a=!0},p:function(t,a){var r={};8&a&&(r.pagination=t[3]),4&a&&(r.rows=t[2]),e.$set(r)},i:function(t){a||(D(e.$$.fragment,t),a=!0)},o:function(t){S(e.$$.fragment,t),a=!1},d:function(t){P(e,t)}}}function ot(t){var e,a;return(e=new K({})).$on("confirm",t[13]),e.$on("dismiss",t[19]),{c:function(){w(e.$$.fragment)},l:function(t){E(e.$$.fragment,t)},m:function(t,r){y(e,t,r),a=!0},p:x,i:function(t){a||(D(e.$$.fragment,t),a=!0)},o:function(t){S(e.$$.fragment,t),a=!1},d:function(t){P(e,t)}}}function ct(t){var e,a,r,s,n,o,c,b,x,O,U,H,q,G,L,Q,Y,z,J,K,X,Z,tt,et,at,ct,it,lt,ut,ft,dt,pt,ht,mt,vt,bt,gt,kt,_t,$t,wt,Et,yt,xt,Dt,St,Pt,Rt,At,Bt,Vt,It,Tt,Nt,Ct,Ft,jt,Mt,Ot,Ut,Ht,qt,Gt,Lt,Wt,Qt,Yt,zt,Jt,Kt,Xt,Zt=t[3]&&rt(t);G=new g({props:{data:k}}),ct=new g({props:{data:_}}),$t=new g({props:{data:$}});var te=[nt,st],ee=[];function ae(t,e){var a;return(null===(a=t[2])||void 0===a?void 0:a.length)>0?0:1}Ot=ae(t),Ut=ee[Ot]=te[Ot](t);var re=t[1]&&ot(t);return{c:function(){e=R(),a=i("br"),r=i("br"),s=R(),n=i("div"),o=i("div"),c=i("div"),b=i("h3"),x=l("Stocks\r\n                "),Zt&&Zt.c(),O=R(),U=i("div"),H=i("a"),q=i("span"),w(G.$$.fragment),L=R(),Q=i("span"),Y=l("Add a Stock"),z=R(),J=i("div"),K=i("div"),X=i("div"),Z=i("div"),tt=i("input"),et=R(),at=i("span"),w(ct.$$.fragment),it=R(),lt=i("div"),ut=i("button"),ft=l("Search"),dt=R(),pt=i("div"),ht=i("div"),mt=i("div"),vt=i("button"),bt=i("span"),gt=l("Export To Excel or PDF"),kt=R(),_t=i("span"),w($t.$$.fragment),wt=R(),Et=i("div"),yt=i("div"),xt=i("a"),Dt=l("Export Current Page to Excel"),St=R(),Pt=i("a"),Rt=l("Export Current Page to PDF"),At=R(),Bt=i("hr"),Vt=R(),It=i("a"),Tt=l("Export All to Excel"),Nt=R(),Ct=i("a"),Ft=l("Export All to PDF"),jt=R(),Mt=i("div"),Ut.c(),Ht=R(),qt=i("br"),Gt=i("br"),Lt=i("br"),Wt=i("br"),Qt=i("br"),Yt=R(),re&&re.c(),zt=A(),this.h()},l:function(t){B('[data-svelte="svelte-13tnnf4"]',document.head).forEach(p),e=V(t),a=u(t,"BR",{}),r=u(t,"BR",{}),s=V(t),n=u(t,"DIV",{class:!0});var i=f(n);o=u(i,"DIV",{class:!0});var l=f(o);c=u(l,"DIV",{class:!0});var h=f(c);b=u(h,"H3",{});var m=f(b);x=d(m,"Stocks\r\n                "),Zt&&Zt.l(m),m.forEach(p),h.forEach(p),O=V(l),U=u(l,"DIV",{class:!0});var v=f(U);H=u(v,"A",{href:!0,class:!0});var g=f(H);q=u(g,"SPAN",{class:!0});var k=f(q);E(G.$$.fragment,k),k.forEach(p),L=V(g),Q=u(g,"SPAN",{class:!0});var _=f(Q);Y=d(_,"Add a Stock"),_.forEach(p),g.forEach(p),v.forEach(p),l.forEach(p),z=V(i),J=u(i,"DIV",{class:!0});var $=f(J);K=u($,"DIV",{class:!0});var w=f(K);X=u(w,"DIV",{class:!0,style:!0});var y=f(X);Z=u(y,"DIV",{class:!0});var D=f(Z);tt=u(D,"INPUT",{class:!0,type:!0,placeholder:!0}),et=V(D),at=u(D,"SPAN",{class:!0});var S=f(at);E(ct.$$.fragment,S),S.forEach(p),D.forEach(p),it=V(y),lt=u(y,"DIV",{class:!0});var P=f(lt);ut=u(P,"BUTTON",{class:!0});var R=f(ut);ft=d(R,"Search"),R.forEach(p),P.forEach(p),y.forEach(p),w.forEach(p),dt=V($),pt=u($,"DIV",{class:!0});var I=f(pt);ht=u(I,"DIV",{class:!0});var T=f(ht);mt=u(T,"DIV",{class:!0});var N=f(mt);vt=u(N,"BUTTON",{class:!0,"aria-haspopup":!0,"aria-controls":!0});var C=f(vt);bt=u(C,"SPAN",{});var F=f(bt);gt=d(F,"Export To Excel or PDF"),F.forEach(p),kt=V(C),_t=u(C,"SPAN",{class:!0});var j=f(_t);E($t.$$.fragment,j),j.forEach(p),C.forEach(p),N.forEach(p),wt=V(T),Et=u(T,"DIV",{class:!0,id:!0,role:!0});var M=f(Et);yt=u(M,"DIV",{class:!0});var W=f(yt);xt=u(W,"A",{href:!0,class:!0});var rt=f(xt);Dt=d(rt,"Export Current Page to Excel"),rt.forEach(p),St=V(W),Pt=u(W,"A",{href:!0,class:!0});var st=f(Pt);Rt=d(st,"Export Current Page to PDF"),st.forEach(p),At=V(W),Bt=u(W,"HR",{class:!0}),Vt=V(W),It=u(W,"A",{href:!0,class:!0});var nt=f(It);Tt=d(nt,"Export All to Excel"),nt.forEach(p),Nt=V(W),Ct=u(W,"A",{href:!0,class:!0});var ot=f(Ct);Ft=d(ot,"Export All to PDF"),ot.forEach(p),W.forEach(p),M.forEach(p),T.forEach(p),I.forEach(p),$.forEach(p),jt=V(i),Mt=u(i,"DIV",{class:!0});var Ot=f(Mt);Ut.l(Ot),Ot.forEach(p),Ht=V(i),qt=u(i,"BR",{}),Gt=u(i,"BR",{}),Lt=u(i,"BR",{}),Wt=u(i,"BR",{}),Qt=u(i,"BR",{}),i.forEach(p),Yt=V(t),re&&re.l(t),zt=A(),this.h()},h:function(){document.title="Stocks",h(c,"class","column"),h(q,"class","icon"),h(Q,"class","has-text-white has-text-weight-bold"),h(H,"href","/stocks/add"),h(H,"class","button is-dark px-5"),h(U,"class","column has-text-right"),h(o,"class","columns"),h(tt,"class","input is-dark"),h(tt,"type","search"),h(tt,"placeholder","search"),h(at,"class","icon is-small is-left"),h(Z,"class","control has-icons-left"),h(ut,"class","button is-dark has-text-weight-bold"),h(lt,"class","control"),h(X,"class","field has-addons"),I(X,"width","500px"),h(K,"class","column"),h(_t,"class","icon is-small"),h(vt,"class","button"),h(vt,"aria-haspopup","true"),h(vt,"aria-controls","dropdown-menu"),h(mt,"class","dropdown-trigger"),h(xt,"href","#"),h(xt,"class","dropdown-item"),h(Pt,"href","#"),h(Pt,"class","dropdown-item"),h(Bt,"class","dropdown-divider"),h(It,"href","#"),h(It,"class","dropdown-item"),h(Ct,"href","#"),h(Ct,"class","dropdown-item"),h(yt,"class","dropdown-content has-text-left"),h(Et,"class","dropdown-menu"),h(Et,"id","dropdown-menu"),h(Et,"role","menu"),h(ht,"class","dropdown is-hoverable"),h(pt,"class","column has-text-right"),h(J,"class","columns"),h(Mt,"class","card"),h(n,"class","container px-6")},m:function(i,l){m(i,e,l),m(i,a,l),m(i,r,l),m(i,s,l),m(i,n,l),v(n,o),v(o,c),v(c,b),v(b,x),Zt&&Zt.m(b,null),v(o,O),v(o,U),v(U,H),v(H,q),y(G,q,null),v(H,L),v(H,Q),v(Q,Y),v(n,z),v(n,J),v(J,K),v(K,X),v(X,Z),v(Z,tt),T(tt,t[0]),v(Z,et),v(Z,at),y(ct,at,null),v(X,it),v(X,lt),v(lt,ut),v(ut,ft),v(J,dt),v(J,pt),v(pt,ht),v(ht,mt),v(mt,vt),v(vt,bt),v(bt,gt),v(vt,kt),v(vt,_t),y($t,_t,null),v(ht,wt),v(ht,Et),v(Et,yt),v(yt,xt),v(xt,Dt),v(yt,St),v(yt,Pt),v(Pt,Rt),v(yt,At),v(yt,Bt),v(yt,Vt),v(yt,It),v(It,Tt),v(yt,Nt),v(yt,Ct),v(Ct,Ft),v(n,jt),v(n,Mt),ee[Ot].m(Mt,null),v(n,Ht),v(n,qt),v(n,Gt),v(n,Lt),v(n,Wt),v(n,Qt),m(i,Yt,l),re&&re.m(i,l),m(i,zt,l),Jt=!0,Kt||(Xt=[N(tt,"input",t[18]),N(ut,"click",t[7]),N(xt,"click",C(t[14])),N(Pt,"click",C(t[15])),N(It,"click",C(t[16])),N(Ct,"click",C(t[17]))],Kt=!0)},p:function(t,e){var a=F(e,1)[0];t[3]?Zt?Zt.p(t,a):((Zt=rt(t)).c(),Zt.m(b,null)):Zt&&(Zt.d(1),Zt=null),1&a&&T(tt,t[0]);var r=Ot;(Ot=ae(t))===r?ee[Ot].p(t,a):(W(),S(ee[r],1,1,(function(){ee[r]=null})),j(),(Ut=ee[Ot])?Ut.p(t,a):(Ut=ee[Ot]=te[Ot](t)).c(),D(Ut,1),Ut.m(Mt,null)),t[1]?re?(re.p(t,a),2&a&&D(re,1)):((re=ot(t)).c(),D(re,1),re.m(zt.parentNode,zt)):re&&(W(),S(re,1,1,(function(){re=null})),j())},i:function(t){Jt||(D(G.$$.fragment,t),D(ct.$$.fragment,t),D($t.$$.fragment,t),D(Ut),D(re),Jt=!0)},o:function(t){S(G.$$.fragment,t),S(ct.$$.fragment,t),S($t.$$.fragment,t),S(Ut),S(re),Jt=!1},d:function(t){t&&p(e),t&&p(a),t&&p(r),t&&p(s),t&&p(n),Zt&&Zt.d(),P(G),P(ct),P($t),ee[Ot].d(),t&&p(Yt),re&&re.d(t),t&&p(zt),Kt=!1,M(Xt)}}}var it="stock_items";function lt(t){var e=[];return t.forEach((function(t){e.push([t.id,t.attributes.warehouse.data.attributes.name,t.attributes.consortium_member.data.attributes.name,t.attributes.date,"-","-","-","-","-","-","-","-"]),t.attributes.stock_items.data.forEach((function(t){e.push(["-","-","-","-",t.id,t.attributes.purchase_order_item.data.attributes.purchase_order.data.attributes.poNumber,t.attributes.purchase_order_item.data.attributes.item.data.attributes.name,t.attributes.purchase_order_item.data.attributes.unit,t.attributes.purchase_order_item.data.attributes.pieces,t.attributes.purchase_order_item.data.attributes.quantity,t.attributes.purchase_order_item.data.attributes.currency,t.attributes.purchase_order_item.data.attributes.unitPrice,t.attributes.received])}))})),e}function ut(t,e,a){var r=O.subscribe((function(t){!t.loggedIn&&t.fetched?U("/login"):t.data&&d()}));H(r);var s,n,o="",c="",i=!1,l=[],u=[{key:"id",title:"ID",sortable:!0,filterValue:function(t){return Math.floor(t.id/10)},interval:10,filterType:"numeric",headerClass:"has-text-left",selected:!0},{key:"warehouse",title:"Warehouse",sortable:!0,filterValue:function(t){return t.first_name.charAt(0).toLowerCase()},filterType:"string",selected:!0},{key:"consortium_member",title:"Consortium Member",sortable:!0,filterValue:function(t){return t.last_name.charAt(0).toLowerCase()},filterType:"string",selected:!0},{key:"date",title:"Date",sortable:!0,filterValue:function(t){return t.last_name.charAt(0).toLowerCase()},filterType:"string",selected:!0}],f=[{key:"id",title:"ID",sortable:!0,selected:!0},{key:"poNumber",title:"PO#",sortable:!0,selected:!0},{key:"item",title:"ITEM",sortable:!0,selected:!0},{key:"unit",title:"Unit",sortable:!0,selected:!0},{key:"pieces",title:"Pieces",sortable:!0,selected:!0},{key:"quantity",title:"Quantity",sortable:!0,selected:!0},{key:"currency",title:"Currency",sortable:!0,selected:!0},{key:"unitPrice",title:"Unit Price",sortable:!0,selected:!0},{key:"received",title:"Received",sortable:!0,selected:!0}];function d(t,e,a){return p.apply(this,arguments)}function p(){return(p=q(G.mark((function t(e,r,s){var o,c,i;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={filters:e||{},sort:r||"id:desc","pagination[page]":s||1,populate:{consortium_member:{populate:"*"},warehouse:{populate:"*"},stock_items:{populate:["purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]}}},c=J.stringify(c,{encodeValuesOnly:!0}),t.next=5,L("stocks",c);case 5:i=t.sent,console.log("Get Stocks Request - ",i),a(2,l=i.data),a(3,n=null===(o=i.meta)||void 0===o?void 0:o.pagination),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.warn("Error Getting Stocks - ",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function h(){d(v(),c)}function m(){return(m=q(G.mark((function t(){var e,r;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(1,i=!1),t.prev=1,t.next=4,Y("stocks/"+s.id,null);case 4:r=t.sent,console.log("Delete Stock Request  ",r),null!==(e=r.data)&&void 0!==e&&e.id&&(Q.push("Stock Deleted Successfully!",{duration:2e4,theme:{"--toastBackground":"#48BB78","--toastBarBackground":"#2F855A"}}),et("Stock",s,"Delete",r.data.id),h()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("Error Delete Stock   ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))).apply(this,arguments)}function v(){return{$or:[{date:{$containsi:o}},{consortium_member:{name:{$containsi:o}}},{warehouse:{name:{$containsi:o}}},{stock_items:{purchase_order_item:{item:{name:{$containsi:o}}}}},{stock_items:{purchase_order_item:{item:{category:{$containsi:o}}}}},{stock_items:{purchase_order_item:{unit:{$containsi:o}}}},{stock_items:{purchase_order_item:{purchase_order:{poNumber:{$containsi:o}}}}}]}}function b(){return(b=q(G.mark((function t(){var e,a,r,s,n;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={populate:{consortium_member:{populate:"*"},warehouse:{populate:"*"},stock_items:{populate:["purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]}},"pagination[limit]":-1},e=J.stringify(e,{encodeValuesOnly:!0}),t.next=5,L("stocks",e);case 5:a=t.sent,r=new Date,s='"SWAN "'.concat("Stocks"," ",r.getFullYear(),"-").concat(r.getMonth(),"-").concat(r.getDate()," T").concat(r.getHours(),"-").concat(r.getMinutes(),"-").concat(r.getSeconds(),".csv"),n=lt(a.data),n=[u.concat(f).map((function(t){return t.title}))].concat(z(n)),Z(s,n),t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}function g(){return(g=q(G.mark((function t(){var e,a;return G.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={"pagination[limit]":-1,populate:{consortium_member:{populate:"*"},warehouse:{populate:"*"},stock_items:{populate:["purchase_order_item","purchase_order_item.item","purchase_order_item.purchase_order"]}}},e=J.stringify(e,{encodeValuesOnly:!0}),t.next=5,L("stocks",e);case 5:a=t.sent,tt("Stocks",lt(a.data),u.concat(f)),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return[o,i,l,n,u,f,{title:"Stocks Table",showFilterHeader:!1,showSelect:!1,showDetails:!1,showPrint:!0,showActions:!0,showFooter:!1},h,function(t){d(v(),c,t.detail.newPage)},function(t){c=(c=(c=t.detail.key).replace("consortium_member","consortium_member.name")).replace("warehouse","warehouse.name"),d(v(),c,t.detail.newPage)},function(t){U("stocks/edit/"+t.detail.row.id)},function(t){U("reports/single/stock/"+t.detail.row.id)},function(t){s=t.detail.row,a(1,i=!0)},function(){return m.apply(this,arguments)},function(){var t=new Date,e='"SWAN "'.concat("Stocks"," ",t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate()," T").concat(t.getHours(),"-").concat(t.getMinutes(),"-").concat(t.getSeconds(),".csv"),a=lt(l);a=[u.concat(f).map((function(t){return t.title}))].concat(z(a)),Z(e,a)},function(){tt("Stocks",lt(l),u.concat(f))},function(){return b.apply(this,arguments)},function(){return g.apply(this,arguments)},function(){o=this.value,a(0,o)},function(){return a(1,i=!1)}]}var ft=function(e){t(i,o);var a=at(i);function i(t){var e;return r(this,i),e=a.call(this),s(n(e),t,ut,ct,c,{}),e}return i}();export{ft as default};
