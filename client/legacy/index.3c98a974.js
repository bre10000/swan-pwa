import{_ as t,a,b as e,c as r,i as s,d as i,S as l,s as n,I as o,a4 as c,a$ as u,ar as d,ay as v,a9 as f,ap as h,e as b,D as m,t as p,f as _,h as y,G as E,j as g,k,l as w,m as D,n as $,p as x,X as T,w as R,F as B,x as P,y as I,K as S,L as V,M as H,ai as q,A,B as N,C as W,O,a7 as j,a1 as M,P as U,Q as C,ad as F,R as L}from"./client.1b06dd5c.js";import{l as G}from"./index.448aaebd.js";import{n as Q}from"./index.18ad19d4.js";import{e as z}from"./csvGenerator.d45bcb57.js";import{e as K}from"./exportPDFAlternate.4f072d5c.js";import"./DateInput.a88975cd.js";import{D as X}from"./DateInput.e0abd7f2.js";import{f as Y,a as J,r as Z}from"./required.fa35697e.js";import{S as tt}from"./Select.03eea700.js";import"./jspdf.plugin.autotable.051a3bc1.js";function at(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,i=a(t);if(r){var l=a(this).constructor;s=Reflect.construct(i,arguments,l)}else s=i.apply(this,arguments);return e(this,s)}}function et(t,a,e){var r=t.slice();return r[22]=a[e],r[24]=e,r}function rt(t){var a,e;return{c:function(){a=b("p"),e=p("Destination is required"),this.h()},l:function(t){a=_(t,"P",{class:!0});var r=y(a);e=g(r,"Destination is required"),r.forEach(k),this.h()},h:function(){w(a,"class","help is-danger")},m:function(t,r){D(t,a,r),$(a,e)},d:function(t){t&&k(a)}}}function st(t){for(var a,e,r,s,i,l,n,o,c,u,d,v,f,h,R,B,P,I,S,V,H,q,A,N,W,O,j,M,U,C,F,L,G,z,K,X,Y,J,Z,tt,at,rt,st,ot,ut,dt,vt,ft,ht,bt,mt,pt,_t,yt,Et,gt,kt,wt,Dt,$t,xt=Q(ct(t[0]))+"",Tt=t[4].value!=t[3].value&&it(t),Rt=t[2].value&&lt(t),Bt=t[0],Pt=[],It=0;It<Bt.length;It+=1)Pt[It]=nt(et(t,Bt,It));return{c:function(){a=b("div"),e=b("br"),r=m(),s=b("h3"),i=p("Waybill by Destination"),l=m(),n=b("hr"),o=m(),Tt&&Tt.c(),c=m(),Rt&&Rt.c(),u=m(),d=b("table"),v=b("tr"),f=b("td"),h=p("No."),R=m(),B=b("th"),P=p("Consortium Member"),I=m(),S=b("th"),V=p("Destination"),H=m(),q=b("th"),A=p("Date"),N=m(),W=b("th"),O=p("Description"),j=m(),M=b("th"),U=p("Category"),C=m(),F=b("th"),L=p("Unit"),G=m(),z=b("th"),K=p("Pcs/Package"),X=m(),Y=b("th"),J=p("Unit Price"),Z=m(),tt=b("th"),at=p("Quantity"),rt=m(),st=b("th"),ot=p("Total"),ut=m();for(var t=0;t<Pt.length;t+=1)Pt[t].c();dt=m(),vt=b("tr"),ft=b("th"),ht=p("Total"),bt=m(),mt=b("th"),pt=m(),_t=b("th"),yt=p(xt),Et=m(),gt=b("br"),kt=b("br"),wt=m(),Dt=b("br"),$t=b("br"),this.h()},l:function(t){a=_(t,"DIV",{class:!0});var b=y(a);e=_(b,"BR",{}),r=E(b),s=_(b,"H3",{class:!0});var m=y(s);i=g(m,"Waybill by Destination"),m.forEach(k),l=E(b),n=_(b,"HR",{}),o=E(b),Tt&&Tt.l(b),c=E(b),Rt&&Rt.l(b),u=E(b),d=_(b,"TABLE",{class:!0});var p=y(d);v=_(p,"TR",{class:!0});var w=y(v);f=_(w,"TD",{});var D=y(f);h=g(D,"No."),D.forEach(k),R=E(w),B=_(w,"TH",{class:!0});var $=y(B);P=g($,"Consortium Member"),$.forEach(k),I=E(w),S=_(w,"TH",{class:!0});var x=y(S);V=g(x,"Destination"),x.forEach(k),H=E(w),q=_(w,"TH",{class:!0});var T=y(q);A=g(T,"Date"),T.forEach(k),N=E(w),W=_(w,"TH",{class:!0});var Q=y(W);O=g(Q,"Description"),Q.forEach(k),j=E(w),M=_(w,"TH",{class:!0});var et=y(M);U=g(et,"Category"),et.forEach(k),C=E(w),F=_(w,"TH",{class:!0});var it=y(F);L=g(it,"Unit"),it.forEach(k),G=E(w),z=_(w,"TH",{class:!0});var lt=y(z);K=g(lt,"Pcs/Package"),lt.forEach(k),X=E(w),Y=_(w,"TH",{class:!0});var nt=y(Y);J=g(nt,"Unit Price"),nt.forEach(k),Z=E(w),tt=_(w,"TH",{class:!0});var ct=y(tt);at=g(ct,"Quantity"),ct.forEach(k),rt=E(w),st=_(w,"TH",{class:!0});var Bt=y(st);ot=g(Bt,"Total"),Bt.forEach(k),w.forEach(k),ut=E(p);for(var It=0;It<Pt.length;It+=1)Pt[It].l(p);dt=E(p),vt=_(p,"TR",{class:!0});var St=y(vt);ft=_(St,"TH",{});var Vt=y(ft);ht=g(Vt,"Total"),Vt.forEach(k),bt=E(St),mt=_(St,"TH",{colspan:!0}),y(mt).forEach(k),pt=E(St),_t=_(St,"TH",{});var Ht=y(_t);yt=g(Ht,xt),Ht.forEach(k),St.forEach(k),p.forEach(k),Et=E(b),gt=_(b,"BR",{}),kt=_(b,"BR",{}),wt=E(b),Dt=_(b,"BR",{}),$t=_(b,"BR",{}),b.forEach(k),this.h()},h:function(){w(s,"class","is-size-5"),w(B,"class","has-text-white"),w(S,"class","has-text-white"),w(q,"class","has-text-white"),w(W,"class","has-text-white"),w(M,"class","has-text-white"),w(F,"class","has-text-white"),w(z,"class","has-text-white"),w(Y,"class","has-text-white"),w(tt,"class","has-text-white"),w(st,"class","has-text-white"),w(v,"class","has-background-black has-text-white"),w(mt,"colspan","9"),w(vt,"class",""),w(d,"class","table is-bordered is-fullwidth is-narrow"),w(a,"class","card p-6 svelte-1wp22nk")},m:function(t,b){D(t,a,b),$(a,e),$(a,r),$(a,s),$(s,i),$(a,l),$(a,n),$(a,o),Tt&&Tt.m(a,null),$(a,c),Rt&&Rt.m(a,null),$(a,u),$(a,d),$(d,v),$(v,f),$(f,h),$(v,R),$(v,B),$(B,P),$(v,I),$(v,S),$(S,V),$(v,H),$(v,q),$(q,A),$(v,N),$(v,W),$(W,O),$(v,j),$(v,M),$(M,U),$(v,C),$(v,F),$(F,L),$(v,G),$(v,z),$(z,K),$(v,X),$(v,Y),$(Y,J),$(v,Z),$(v,tt),$(tt,at),$(v,rt),$(v,st),$(st,ot),$(d,ut);for(var m=0;m<Pt.length;m+=1)Pt[m].m(d,null);$(d,dt),$(d,vt),$(vt,ft),$(ft,ht),$(vt,bt),$(vt,mt),$(vt,pt),$(vt,_t),$(_t,yt),$(a,Et),$(a,gt),$(a,kt),$(a,wt),$(a,Dt),$(a,$t)},p:function(t,e){if(t[4].value!=t[3].value?Tt?Tt.p(t,e):((Tt=it(t)).c(),Tt.m(a,c)):Tt&&(Tt.d(1),Tt=null),t[2].value?Rt?Rt.p(t,e):((Rt=lt(t)).c(),Rt.m(a,u)):Rt&&(Rt.d(1),Rt=null),1&e){var r;for(Bt=t[0],r=0;r<Bt.length;r+=1){var s=et(t,Bt,r);Pt[r]?Pt[r].p(s,e):(Pt[r]=nt(s),Pt[r].c(),Pt[r].m(d,dt))}for(;r<Pt.length;r+=1)Pt[r].d(1);Pt.length=Bt.length}1&e&&xt!==(xt=Q(ct(t[0]))+"")&&x(yt,xt)},d:function(t){t&&k(a),Tt&&Tt.d(),Rt&&Rt.d(),T(Pt,t)}}}function it(t){var a,e,r,s,i,l=t[4].value.toDateString()+"",n=t[3].value.toDateString()+"";return{c:function(){a=b("p"),e=p("Start - "),r=p(l),s=p("\r\n                               \r\n                    End - "),i=p(n),this.h()},l:function(t){a=_(t,"P",{class:!0});var o=y(a);e=g(o,"Start - "),r=g(o,l),s=g(o,"\r\n                               \r\n                    End - "),i=g(o,n),o.forEach(k),this.h()},h:function(){w(a,"class","gray")},m:function(t,l){D(t,a,l),$(a,e),$(a,r),$(a,s),$(a,i)},p:function(t,a){16&a&&l!==(l=t[4].value.toDateString()+"")&&x(r,l),8&a&&n!==(n=t[3].value.toDateString()+"")&&x(i,n)},d:function(t){t&&k(a)}}}function lt(t){var a,e,r=t[2].value.value+"";return{c:function(){a=b("p"),e=p(r),this.h()},l:function(t){a=_(t,"P",{class:!0});var s=y(a);e=g(s,r),s.forEach(k),this.h()},h:function(){w(a,"class","card-header-title")},m:function(t,r){D(t,a,r),$(a,e)},p:function(t,a){4&a&&r!==(r=t[2].value.value+"")&&x(e,r)},d:function(t){t&&k(a)}}}function nt(t){var a,e,r,s,i,l,n,o,c,u,d,v,f,h,w,T,R,B,P,I,S,V,H,q,A,N,W,O,j,M,U,C,F,L,G,z,K,X,Y,J,Z,tt,at,et,rt,st,it,lt,nt,ot,ct,ut,dt,vt,ft,ht,bt,mt,pt,_t,yt,Et,gt=t[24]+1+"",kt=(null===(a=t[22].attributes.waybill.data)||void 0===a||null===(e=a.attributes.consortium_member.data)||void 0===e?void 0:e.attributes.name)+"",wt=(null===(r=t[22].attributes.waybill.data)||void 0===r?void 0:r.attributes.destination)+"",Dt=(null===(s=t[22].attributes.waybill.data)||void 0===s?void 0:s.attributes.date)+"",$t=(null===(i=t[22].attributes.stock_release_item.data)||void 0===i||null===(l=i.attributes.purchase_order_item.data)||void 0===l||null===(n=l.attributes.item.data)||void 0===n?void 0:n.attributes.name)+"",xt=(null===(o=t[22].attributes.stock_release_item.data)||void 0===o||null===(c=o.attributes.purchase_order_item.data)||void 0===c?void 0:c.id)+"",Tt=(null===(u=t[22].attributes.stock_release_item.data)||void 0===u||null===(d=u.attributes.purchase_order_item.data)||void 0===d||null===(v=d.attributes.item.data)||void 0===v?void 0:v.attributes.category)+"",Rt=(null===(f=t[22].attributes.stock_release_item.data)||void 0===f||null===(h=f.attributes.purchase_order_item.data)||void 0===h?void 0:h.attributes.unit)+"",Bt=(null===(w=t[22].attributes.stock_release_item.data)||void 0===w||null===(T=w.attributes.purchase_order_item.data)||void 0===T?void 0:T.attributes.pieces)+"",Pt=(null===(R=t[22].attributes.stock_release_item.data)||void 0===R||null===(B=R.attributes.purchase_order_item.data)||void 0===B?void 0:B.attributes.unitPrice)+"",It=(null===(P=t[22].attributes.stock_release_item.data)||void 0===P?void 0:P.attributes.quantity)+"",St=Q((null===(I=t[22].attributes.stock_release_item.data)||void 0===I||null===(S=I.attributes.purchase_order_item.data)||void 0===S?void 0:S.attributes.unitPrice)*(null===(V=t[22].attributes.stock_release_item.data)||void 0===V?void 0:V.attributes.quantity))+"",Vt=(null===(H=t[22].attributes.stock_release_item.data)||void 0===H||null===(q=H.attributes.purchase_order_item.data)||void 0===q?void 0:q.attributes.currency)+"";return{c:function(){A=b("tr"),N=b("td"),W=p(gt),O=m(),j=b("td"),M=p(kt),U=m(),C=b("td"),F=p(wt),L=m(),G=b("td"),z=p(Dt),K=m(),X=b("td"),Y=p($t),J=p(" - ("),Z=p(xt),tt=p(")"),at=m(),et=b("td"),rt=p(Tt),st=m(),it=b("td"),lt=p(Rt),nt=m(),ot=b("td"),ct=p(Bt),ut=m(),dt=b("td"),vt=p(Pt),ft=m(),ht=b("td"),bt=p(It),mt=m(),pt=b("td"),_t=p(St),yt=m(),Et=p(Vt)},l:function(t){A=_(t,"TR",{});var a=y(A);N=_(a,"TD",{});var e=y(N);W=g(e,gt),e.forEach(k),O=E(a),j=_(a,"TD",{});var r=y(j);M=g(r,kt),r.forEach(k),U=E(a),C=_(a,"TD",{});var s=y(C);F=g(s,wt),s.forEach(k),L=E(a),G=_(a,"TD",{});var i=y(G);z=g(i,Dt),i.forEach(k),K=E(a),X=_(a,"TD",{});var l=y(X);Y=g(l,$t),J=g(l," - ("),Z=g(l,xt),tt=g(l,")"),l.forEach(k),at=E(a),et=_(a,"TD",{});var n=y(et);rt=g(n,Tt),n.forEach(k),st=E(a),it=_(a,"TD",{});var o=y(it);lt=g(o,Rt),o.forEach(k),nt=E(a),ot=_(a,"TD",{});var c=y(ot);ct=g(c,Bt),c.forEach(k),ut=E(a),dt=_(a,"TD",{});var u=y(dt);vt=g(u,Pt),u.forEach(k),ft=E(a),ht=_(a,"TD",{});var d=y(ht);bt=g(d,It),d.forEach(k),mt=E(a),pt=_(a,"TD",{});var v=y(pt);_t=g(v,St),yt=E(v),Et=g(v,Vt),v.forEach(k),a.forEach(k)},m:function(t,a){D(t,A,a),$(A,N),$(N,W),$(A,O),$(A,j),$(j,M),$(A,U),$(A,C),$(C,F),$(A,L),$(A,G),$(G,z),$(A,K),$(A,X),$(X,Y),$(X,J),$(X,Z),$(X,tt),$(A,at),$(A,et),$(et,rt),$(A,st),$(A,it),$(it,lt),$(A,nt),$(A,ot),$(ot,ct),$(A,ut),$(A,dt),$(dt,vt),$(A,ft),$(A,ht),$(ht,bt),$(A,mt),$(A,pt),$(pt,_t),$(pt,yt),$(pt,Et)},p:function(t,a){var e,r,s,i,l,n,o,c,u,d,v,f,h,b,m,p,_,y,E,g,k,w,D,$;1&a&&kt!==(kt=(null===(e=t[22].attributes.waybill.data)||void 0===e||null===(r=e.attributes.consortium_member.data)||void 0===r?void 0:r.attributes.name)+"")&&x(M,kt),1&a&&wt!==(wt=(null===(s=t[22].attributes.waybill.data)||void 0===s?void 0:s.attributes.destination)+"")&&x(F,wt),1&a&&Dt!==(Dt=(null===(i=t[22].attributes.waybill.data)||void 0===i?void 0:i.attributes.date)+"")&&x(z,Dt),1&a&&$t!==($t=(null===(l=t[22].attributes.stock_release_item.data)||void 0===l||null===(n=l.attributes.purchase_order_item.data)||void 0===n||null===(o=n.attributes.item.data)||void 0===o?void 0:o.attributes.name)+"")&&x(Y,$t),1&a&&xt!==(xt=(null===(c=t[22].attributes.stock_release_item.data)||void 0===c||null===(u=c.attributes.purchase_order_item.data)||void 0===u?void 0:u.id)+"")&&x(Z,xt),1&a&&Tt!==(Tt=(null===(d=t[22].attributes.stock_release_item.data)||void 0===d||null===(v=d.attributes.purchase_order_item.data)||void 0===v||null===(f=v.attributes.item.data)||void 0===f?void 0:f.attributes.category)+"")&&x(rt,Tt),1&a&&Rt!==(Rt=(null===(h=t[22].attributes.stock_release_item.data)||void 0===h||null===(b=h.attributes.purchase_order_item.data)||void 0===b?void 0:b.attributes.unit)+"")&&x(lt,Rt),1&a&&Bt!==(Bt=(null===(m=t[22].attributes.stock_release_item.data)||void 0===m||null===(p=m.attributes.purchase_order_item.data)||void 0===p?void 0:p.attributes.pieces)+"")&&x(ct,Bt),1&a&&Pt!==(Pt=(null===(_=t[22].attributes.stock_release_item.data)||void 0===_||null===(y=_.attributes.purchase_order_item.data)||void 0===y?void 0:y.attributes.unitPrice)+"")&&x(vt,Pt),1&a&&It!==(It=(null===(E=t[22].attributes.stock_release_item.data)||void 0===E?void 0:E.attributes.quantity)+"")&&x(bt,It),1&a&&St!==(St=Q((null===(g=t[22].attributes.stock_release_item.data)||void 0===g||null===(k=g.attributes.purchase_order_item.data)||void 0===k?void 0:k.attributes.unitPrice)*(null===(w=t[22].attributes.stock_release_item.data)||void 0===w?void 0:w.attributes.quantity))+"")&&x(_t,St),1&a&&Vt!==(Vt=(null===(D=t[22].attributes.stock_release_item.data)||void 0===D||null===($=D.attributes.purchase_order_item.data)||void 0===$?void 0:$.attributes.currency)+"")&&x(Et,Vt)},d:function(t){t&&k(A)}}}function ot(t){var a,e,r,s,i,l,n,x,T,j,M,U,C,F,L,G,Q,z,K,Y,J,Z,at,et,it,lt,nt,ot,ct,ut,dt,vt,ft,ht,bt,mt,pt,_t,yt,Et,gt,kt,wt,Dt,$t,xt,Tt,Rt,Bt,Pt,It,St,Vt,Ht,qt,At,Nt,Wt,Ot,jt,Mt,Ut,Ct,Ft,Lt,Gt,Qt,zt,Kt,Xt,Yt,Jt,Zt,ta,aa,ea,ra,sa,ia,la,na,oa,ca,ua,da,va,fa,ha,ba,ma,pa,_a,ya,Ea,ga,ka,wa,Da,$a,xa,Ta,Ra,Ba,Pa,Ia,Sa=t[5].hasError("destination.required");function Va(a){t[14](a)}x=new o({props:{data:c}}),lt=new o({props:{data:u}}),ft=new o({props:{data:d}}),Et=new o({props:{data:v}});var Ha={items:t[1],listAutoWidth:!0};void 0!==t[2].value&&(Ha.value=t[2].value),qt=new tt({props:Ha}),f.push((function(){return h(qt,"value",Va)}));var qa=Sa&&rt();function Aa(a){t[15](a)}var Na={format:"yyyy/MM/dd",placeholder:"2000/31/12",closeOnSelection:!0,min:new Date("1920/1/1"),class:"input"};function Wa(a){t[16](a)}void 0!==t[4].value&&(Na.value=t[4].value),Kt=new X({props:Na}),f.push((function(){return h(Kt,"value",Aa)}));var Oa={format:"yyyy/MM/dd",placeholder:"2000/31/12",closeOnSelection:!0,min:new Date("1920/1/1"),class:"input"};void 0!==t[3].value&&(Oa.value=t[3].value),ia=new X({props:Oa}),f.push((function(){return h(ia,"value",Wa)}));var ja=t[0]&&st(t);return{c:function(){a=m(),e=b("br"),r=b("br"),s=m(),i=b("div"),l=b("a"),n=b("span"),R(x.$$.fragment),T=p(" Back"),j=m(),M=b("br"),U=b("br"),C=m(),F=b("div"),L=b("br"),G=b("br"),Q=m(),z=b("div"),K=b("div"),Y=b("h3"),J=p("Print Waybill by Destination Report"),Z=m(),at=b("div"),et=b("button"),it=b("span"),R(lt.$$.fragment),nt=m(),ot=b("span"),ct=p("Download Excel"),ut=m(),dt=b("button"),vt=b("span"),R(ft.$$.fragment),ht=m(),bt=b("span"),mt=p("Download PDF"),pt=m(),_t=b("button"),yt=b("span"),R(Et.$$.fragment),gt=m(),kt=b("span"),wt=p("Print"),Dt=m(),$t=b("br"),xt=m(),Tt=b("form"),Rt=b("div"),Bt=b("div"),Pt=b("div"),It=b("label"),St=p("Destinations (*)"),Vt=m(),Ht=b("div"),R(qt.$$.fragment),Nt=m(),qa&&qa.c(),Wt=m(),Ot=b("div"),jt=m(),Mt=b("div"),Ut=b("div"),Ct=b("div"),Ft=b("label"),Lt=p("Start"),Gt=b("br"),Qt=m(),zt=b("div"),R(Kt.$$.fragment),Yt=m(),Jt=b("div"),Zt=b("div"),ta=b("label"),aa=p("End"),ea=b("br"),ra=m(),sa=b("div"),R(ia.$$.fragment),na=m(),oa=b("div"),ca=b("button"),ua=p("Filter"),va=m(),fa=b("br"),ha=m(),ba=b("br"),ma=b("br"),pa=m(),ja&&ja.c(),_a=m(),ya=b("br"),Ea=b("br"),ga=b("br"),ka=b("br"),wa=b("br"),Da=b("br"),$a=b("br"),xa=b("br"),Ta=b("br"),Ra=b("br"),this.h()},l:function(t){B('[data-svelte="svelte-1mcvdx9"]',document.head).forEach(k),a=E(t),e=_(t,"BR",{class:!0}),r=_(t,"BR",{class:!0}),s=E(t),i=_(t,"DIV",{class:!0});var o=y(i);l=_(o,"A",{href:!0,class:!0});var c=y(l);n=_(c,"SPAN",{class:!0});var u=y(n);P(x.$$.fragment,u),u.forEach(k),T=g(c," Back"),c.forEach(k),j=E(o),M=_(o,"BR",{class:!0}),U=_(o,"BR",{class:!0}),C=E(o),F=_(o,"DIV",{class:!0});var d=y(F);L=_(d,"BR",{class:!0}),G=_(d,"BR",{class:!0}),Q=E(d),z=_(d,"DIV",{class:!0});var v=y(z);K=_(v,"DIV",{class:!0});var f=y(K);Y=_(f,"H3",{class:!0});var h=y(Y);J=g(h,"Print Waybill by Destination Report"),h.forEach(k),f.forEach(k),Z=E(v),at=_(v,"DIV",{class:!0});var b=y(at);et=_(b,"BUTTON",{class:!0});var m=y(et);it=_(m,"SPAN",{class:!0});var p=y(it);P(lt.$$.fragment,p),p.forEach(k),nt=E(m),ot=_(m,"SPAN",{class:!0});var w=y(ot);ct=g(w,"Download Excel"),w.forEach(k),m.forEach(k),ut=E(b),dt=_(b,"BUTTON",{class:!0});var D=y(dt);vt=_(D,"SPAN",{class:!0});var $=y(vt);P(ft.$$.fragment,$),$.forEach(k),ht=E(D),bt=_(D,"SPAN",{class:!0});var R=y(bt);mt=g(R,"Download PDF"),R.forEach(k),D.forEach(k),pt=E(b),_t=_(b,"BUTTON",{class:!0});var I=y(_t);yt=_(I,"SPAN",{class:!0});var S=y(yt);P(Et.$$.fragment,S),S.forEach(k),gt=E(I),kt=_(I,"SPAN",{class:!0});var V=y(kt);wt=g(V,"Print"),V.forEach(k),I.forEach(k),b.forEach(k),v.forEach(k),Dt=E(d),$t=_(d,"BR",{}),xt=E(d),Tt=_(d,"FORM",{});var H=y(Tt);Rt=_(H,"DIV",{class:!0});var q=y(Rt);Bt=_(q,"DIV",{class:!0});var A=y(Bt);Pt=_(A,"DIV",{class:!0});var N=y(Pt);It=_(N,"LABEL",{for:!0,class:!0});var W=y(It);St=g(W,"Destinations (*)"),W.forEach(k),Vt=E(N),Ht=_(N,"DIV",{class:!0});var O=y(Ht);P(qt.$$.fragment,O),O.forEach(k),Nt=E(N),qa&&qa.l(N),N.forEach(k),A.forEach(k),Wt=E(q),Ot=_(q,"DIV",{class:!0}),y(Ot).forEach(k),q.forEach(k),jt=E(H),Mt=_(H,"DIV",{class:!0});var X=y(Mt);Ut=_(X,"DIV",{class:!0});var tt=y(Ut);Ct=_(tt,"DIV",{class:!0});var rt=y(Ct);Ft=_(rt,"LABEL",{for:!0,class:!0});var st=y(Ft);Lt=g(st,"Start"),st.forEach(k),Gt=_(rt,"BR",{}),Qt=E(rt),zt=_(rt,"DIV",{class:!0});var At=y(zt);P(Kt.$$.fragment,At),At.forEach(k),rt.forEach(k),tt.forEach(k),Yt=E(X),Jt=_(X,"DIV",{class:!0});var Xt=y(Jt);Zt=_(Xt,"DIV",{class:!0});var la=y(Zt);ta=_(la,"LABEL",{for:!0,class:!0});var da=y(ta);aa=g(da,"End"),da.forEach(k),ea=_(la,"BR",{}),ra=E(la),sa=_(la,"DIV",{class:!0});var Ba=y(sa);P(ia.$$.fragment,Ba),Ba.forEach(k),la.forEach(k),Xt.forEach(k),na=E(X),oa=_(X,"DIV",{class:!0});var Pa=y(oa);ca=_(Pa,"BUTTON",{class:!0});var Ia=y(ca);ua=g(Ia,"Filter"),Ia.forEach(k),Pa.forEach(k),X.forEach(k),H.forEach(k),va=E(d),fa=_(d,"BR",{}),d.forEach(k),ha=E(o),ba=_(o,"BR",{class:!0}),ma=_(o,"BR",{class:!0}),pa=E(o),ja&&ja.l(o),o.forEach(k),_a=E(t),ya=_(t,"BR",{}),Ea=_(t,"BR",{}),ga=_(t,"BR",{}),ka=_(t,"BR",{}),wa=_(t,"BR",{}),Da=_(t,"BR",{}),$a=_(t,"BR",{}),xa=_(t,"BR",{}),Ta=_(t,"BR",{}),Ra=_(t,"BR",{}),this.h()},h:function(){document.title="Print Waybill by Destination Report",w(e,"class","hide-print svelte-1wp22nk"),w(r,"class","hide-print svelte-1wp22nk"),w(n,"class","icon is-small"),w(l,"href","reports-list"),w(l,"class","has-text-dark hide-print svelte-1wp22nk"),w(M,"class","hide-print svelte-1wp22nk"),w(U,"class","hide-print svelte-1wp22nk"),w(L,"class","hide-print svelte-1wp22nk"),w(G,"class","hide-print svelte-1wp22nk"),w(Y,"class","my-0 is-size-5 has-text-weight-bold"),w(K,"class","column"),w(it,"class","icon"),w(ot,"class","has-text-white has-text-weight-bold"),w(et,"class","button is-dark px-5 py-2 has-text-weight-bold"),w(vt,"class","icon"),w(bt,"class","has-text-white has-text-weight-bold"),w(dt,"class","button is-dark px-5 py-2 ml-3 has-text-weight-bold"),w(yt,"class","icon"),w(kt,"class","has-text-white has-text-weight-bold"),w(_t,"class","button is-dark px-5 ml-3 py-2 has-text-weight-bold"),w(at,"class","column has-text-right"),w(z,"class","columns"),w(It,"for",""),w(It,"class","gray"),w(Ht,"class","control"),w(Pt,"class","field"),w(Bt,"class","column"),w(Ot,"class","column"),w(Rt,"class","columns"),w(Ft,"for",""),w(Ft,"class","gray"),w(zt,"class","control"),w(Ct,"class","field"),w(Ut,"class","column"),w(ta,"for",""),w(ta,"class","gray"),w(sa,"class","control"),w(Zt,"class","field"),w(Jt,"class","column"),ca.disabled=da=!t[5].valid,w(ca,"class","button is-dark px-5 py-2 has-text-weight-bold"),w(oa,"class","column is-flex is-align-items-end"),w(Mt,"class","columns"),w(F,"class","card px-6 hide-print svelte-1wp22nk"),w(ba,"class","hide-print svelte-1wp22nk"),w(ma,"class","hide-print svelte-1wp22nk"),w(i,"class","container")},m:function(o,c){D(o,a,c),D(o,e,c),D(o,r,c),D(o,s,c),D(o,i,c),$(i,l),$(l,n),I(x,n,null),$(l,T),$(i,j),$(i,M),$(i,U),$(i,C),$(i,F),$(F,L),$(F,G),$(F,Q),$(F,z),$(z,K),$(K,Y),$(Y,J),$(z,Z),$(z,at),$(at,et),$(et,it),I(lt,it,null),$(et,nt),$(et,ot),$(ot,ct),$(at,ut),$(at,dt),$(dt,vt),I(ft,vt,null),$(dt,ht),$(dt,bt),$(bt,mt),$(at,pt),$(at,_t),$(_t,yt),I(Et,yt,null),$(_t,gt),$(_t,kt),$(kt,wt),$(F,Dt),$(F,$t),$(F,xt),$(F,Tt),$(Tt,Rt),$(Rt,Bt),$(Bt,Pt),$(Pt,It),$(It,St),$(Pt,Vt),$(Pt,Ht),I(qt,Ht,null),$(Pt,Nt),qa&&qa.m(Pt,null),$(Rt,Wt),$(Rt,Ot),$(Tt,jt),$(Tt,Mt),$(Mt,Ut),$(Ut,Ct),$(Ct,Ft),$(Ft,Lt),$(Ct,Gt),$(Ct,Qt),$(Ct,zt),I(Kt,zt,null),$(Mt,Yt),$(Mt,Jt),$(Jt,Zt),$(Zt,ta),$(ta,aa),$(Zt,ea),$(Zt,ra),$(Zt,sa),I(ia,sa,null),$(Mt,na),$(Mt,oa),$(oa,ca),$(ca,ua),$(F,va),$(F,fa),$(i,ha),$(i,ba),$(i,ma),$(i,pa),ja&&ja.m(i,null),D(o,_a,c),D(o,ya,c),D(o,Ea,c),D(o,ga,c),D(o,ka,c),D(o,wa,c),D(o,Da,c),D(o,$a,c),D(o,xa,c),D(o,Ta,c),D(o,Ra,c),Ba=!0,Pa||(Ia=[S(et,"click",t[11]),S(dt,"click",t[12]),S(_t,"click",t[13]),S(ca,"click",V(t[10]))],Pa=!0)},p:function(t,a){var e=H(a,1)[0],r={};2&e&&(r.items=t[1]),!At&&4&e&&(At=!0,r.value=t[2].value,q((function(){return At=!1}))),qt.$set(r),32&e&&(Sa=t[5].hasError("destination.required")),Sa?qa||((qa=rt()).c(),qa.m(Pt,null)):qa&&(qa.d(1),qa=null);var s={};!Xt&&16&e&&(Xt=!0,s.value=t[4].value,q((function(){return Xt=!1}))),Kt.$set(s);var l={};!la&&8&e&&(la=!0,l.value=t[3].value,q((function(){return la=!1}))),ia.$set(l),(!Ba||32&e&&da!==(da=!t[5].valid))&&(ca.disabled=da),t[0]?ja?ja.p(t,e):((ja=st(t)).c(),ja.m(i,null)):ja&&(ja.d(1),ja=null)},i:function(t){Ba||(A(x.$$.fragment,t),A(lt.$$.fragment,t),A(ft.$$.fragment,t),A(Et.$$.fragment,t),A(qt.$$.fragment,t),A(Kt.$$.fragment,t),A(ia.$$.fragment,t),Ba=!0)},o:function(t){N(x.$$.fragment,t),N(lt.$$.fragment,t),N(ft.$$.fragment,t),N(Et.$$.fragment,t),N(qt.$$.fragment,t),N(Kt.$$.fragment,t),N(ia.$$.fragment,t),Ba=!1},d:function(t){t&&k(a),t&&k(e),t&&k(r),t&&k(s),t&&k(i),W(x),W(lt),W(ft),W(Et),W(qt),qa&&qa.d(),W(Kt),W(ia),ja&&ja.d(),t&&k(_a),t&&k(ya),t&&k(Ea),t&&k(ga),t&&k(ka),t&&k(wa),t&&k(Da),t&&k($a),t&&k(xa),t&&k(Ta),t&&k(Ra),Pa=!1,O(Ia)}}}function ct(t){var a=0;return t.forEach((function(t){var e,r,s;a+=(null===(e=t.attributes.stock_release_item.data)||void 0===e||null===(r=e.attributes.purchase_order_item.data)||void 0===r?void 0:r.attributes.unitPrice)*(null===(s=t.attributes.stock_release_item.data)||void 0===s?void 0:s.attributes.quantity)})),a}function ut(t,a,e){return e.indexOf(t)===a}function dt(t,a,e){var r,s,i,l,n=new Date,o=Y("destination","",[Z()]);j(t,o,(function(t){return e(2,r=t)}));var c=Y("start",n,[Z()]);j(t,c,(function(t){return e(4,i=t)}));var u=Y("end",n,[Z()]);j(t,u,(function(t){return e(3,s=t)}));var d,v=J(c,u);j(t,v,(function(t){return e(5,l=t)}));var f=[];function h(t){return b.apply(this,arguments)}function b(){return(b=U(C.mark((function t(a){var r,s;return C.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={populate:["waybill","waybill.consortium_member","stock_release_item","stock_release_item.purchase_order_item","stock_release_item.purchase_order_item.item","stock_release_item.purchase_order_item.purchase_order"],filters:a,"pagination[limit]":-1},r=G.stringify(r,{encodeValuesOnly:!0}),t.next=5,L("waybill-items",r);case 5:s=t.sent,console.log("Get Waybill Items  ",s),e(0,d=s.data.filter((function(t){return t.attributes.waybill.data}))),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Error get Waybill Items  ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}function m(){return(m=U(C.mark((function t(){var a;return C.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.validate();case 2:if(l.valid){t.next=4;break}return t.abrupt("return");case 4:a={$and:[{waybill:{destination:{$containsi:r.value.value}}}]},i.value!=s.value&&a.$and.push({waybill:{date:{$gte:i.value,$lte:s.value}}}),h(a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return _.apply(this,arguments)}function _(){return(_=U(C.mark((function t(){var a,r;return C.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={"pagination[limit]":-1},a=G.stringify(a,{encodeValuesOnly:!0}),t.next=5,L("waybills",a);case 5:r=t.sent,console.log("Get Waybills ",r),e(1,f=r.data.map((function(t){return{value:t.attributes.destination,label:t.attributes.destination}})).filter(ut)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Error Get Waybills ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}var y=[{key:"id",title:"Waybill ID",sortable:!0,selected:!0},{key:"consortium_member",title:"Consortium Member",sortable:!0,selected:!0},{key:"destination",title:"Destination",sortable:!0,selected:!0},{key:"date",title:"Date",sortable:!0,selected:!0},{key:"id",title:"Waybill Item ID",sortable:!0,selected:!0},{key:"poNumber",title:"PO#",sortable:!0,selected:!0},{key:"item",title:"Description",sortable:!0,selected:!0},{key:"category",title:"Category",sortable:!0,selected:!0},{key:"unit",title:"Unit",sortable:!0,selected:!0},{key:"pieces",title:"Pieces",sortable:!0,selected:!0},{key:"currency",title:"Currency",sortable:!0,selected:!0},{key:"unitPrice",title:"Unit Price",sortable:!0,selected:!0},{key:"quantity",title:"Quantity",sortable:!0,selected:!0},{key:"total",title:"Total",sortable:!0,selected:!0}];function E(t){var a=[];return t.forEach((function(t){var e,r,s,i,l,n,o,c,u,d;a.push([t.attributes.waybill.data.id,t.attributes.waybill.data.attributes.consortium_member.data.attributes.name,t.attributes.waybill.data.attributes.destination,t.attributes.waybill.data.attributes.date,t.id,null===(e=t.attributes.stock_release_item.data)||void 0===e?void 0:e.attributes.purchase_order_item.data.attributes.purchase_order.data.attributes.poNumber,null===(r=t.attributes.stock_release_item.data)||void 0===r?void 0:r.attributes.purchase_order_item.data.attributes.item.data.attributes.name,null===(s=t.attributes.stock_release_item.data)||void 0===s?void 0:s.attributes.purchase_order_item.data.attributes.item.data.attributes.category,null===(i=t.attributes.stock_release_item.data)||void 0===i?void 0:i.attributes.purchase_order_item.data.attributes.unit,null===(l=t.attributes.stock_release_item.data)||void 0===l?void 0:l.attributes.purchase_order_item.data.attributes.pieces,null===(n=t.attributes.stock_release_item.data)||void 0===n?void 0:n.attributes.purchase_order_item.data.attributes.currency,null===(o=t.attributes.stock_release_item.data)||void 0===o?void 0:o.attributes.purchase_order_item.data.attributes.unitPrice,null===(c=t.attributes.stock_release_item.data)||void 0===c?void 0:c.attributes.quantity,(null===(u=t.attributes.stock_release_item.data)||void 0===u?void 0:u.attributes.purchase_order_item.data.attributes.unitPrice)*(null===(d=t.attributes.stock_release_item.data)||void 0===d?void 0:d.attributes.quantity)])})),a.push(["Total","-","-","-","-","-","-","-","-","-","-","-","-",Q(ct(d))]),a}M(U(C.mark((function t(){return C.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p();case 2:case"end":return t.stop()}}),t)}))));return[d,f,r,s,i,l,o,c,u,v,function(){return m.apply(this,arguments)},function(){var t=new Date,a='"SWAN Waybill by Destination - " '.concat(t.getFullYear(),"-").concat(t.getMonth(),"-").concat(t.getDate()," T").concat(t.getHours(),"-").concat(t.getMinutes(),"-").concat(t.getSeconds(),".csv"),e=E(d);e=[y.map((function(t){return t.title}))].concat(F(e)),z(a,e)},function(){var t="";i.value!=s.value&&(t=" - Start - "+i.value.toDateString()+", End - "+s.value.toDateString()),K("Waybill by Destination - "+r.value.value+t,E(d),y)},function(){window.print()},function(a){t.$$.not_equal(r.value,a)&&(r.value=a,o.set(r))},function(a){t.$$.not_equal(i.value,a)&&(i.value=a,c.set(i))},function(a){t.$$.not_equal(s.value,a)&&(s.value=a,u.set(s))}]}var vt=function(a){t(o,l);var e=at(o);function o(t){var a;return r(this,o),a=e.call(this),s(i(a),t,dt,ot,n,{}),a}return o}();export{vt as default};
